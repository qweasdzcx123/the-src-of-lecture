(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{1145:function(e,t,a){"use strict";a.r(t);var n=a(740),r=a(775),i=a(763),s=a(720),o=a(721),l=a(761),c=a(715),p=a(103),u=a(226),d=a(230),h=a(159),m=a(8),b=a(107),f=a(31),g=a(232),E=a(105),y=a(23),_=a(83),v=a(7),O=a.n(v),P=a(15),w=a.n(P);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends P.PureComponent{constructor(){super(...arguments),S(this,"onClick",()=>{const{paperAugmentedReader:e}=this.props,{authStore:t,dispatcher:a}=this.context;t.ensureLogin({dispatcher:a,location:b.f.augmentedReader}).then(()=>{const t=this.context.history,a=new g.a({status:301,url:e.readerUrl});Object(d.a)({history:t,redirect:a})}).catch(e=>{m.a.error(e)})})}render(){return P.createElement("div",{className:"augmented-reader__ad__container"},P.createElement("div",{className:"augmented-reader__ad"},P.createElement("div",{className:"augmented-reader__ad__pointer"}),P.createElement("div",{className:"augmented-reader__ad__text"},P.createElement("span",{className:"augmented-reader__ad__experiment-tag"},Object(u.b)(e=>e.paperDetail.augmentedReader.experimentTag)),P.createElement("div",{className:"augmented-reader__ad__header"},P.createElement(c.a,{icon:"experiment",width:"18",height:"18"}),P.createElement("span",{className:"augmented-reader__ad__header__label"},Object(u.b)(e=>e.paperDetail.augmentedReader.header))),P.createElement("p",{className:"augmented-reader__ad__description"},Object(u.b)(e=>e.paperDetail.augmentedReader.description))),P.createElement("div",{className:"augmented-reader__ad__buttons"},P.createElement(l.default,{"data-heap-id":"pdp-augmented-reader",icon:P.createElement(c.a,{icon:"arrow-lite",height:"12",width:"12"}),label:Object(u.b)(e=>e.paperDetail.augmentedReader.readerButtonLabel),className:"augmented-reader__ad__reader-button",type:l.TYPE.TERTIARY,onClick:this.onClick}),P.createElement(l.default,{icon:P.createElement(c.a,{icon:"arrow-lite",height:"12",width:"12"}),label:Object(u.b)(e=>e.paperDetail.augmentedReader.feedbackButtonLabel),className:"augmented-reader__ad__reader-feedback-button",type:l.TYPE.TERTIARY,onClick:()=>this.context.dispatcher.dispatch(Object(E.b)({id:f.b.FEEDBACK}))}))),P.createElement("div",{className:"augmented-reader__ad__border"}))}}S(T,"contextTypes",{authStore:O.a.instanceOf(p.a).isRequired,iconStore:O.a.instanceOf(h.a).isRequired,dispatcher:O.a.instanceOf(y.a).isRequired,history:O.a.instanceOf(_.a).isRequired});var C=a(946),x=a(926),k=a(18);var N,D,j,I=e=>{let{children:t}=e;return P.createElement(C.a,{feature:k.b.AugmentedReader,enrollmentKey:x.a.AUGMENTED_READER_BETA},t)},A=a(106),L=a(1);function R(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}class M extends P.PureComponent{componentDidMount(){this.context.dispatcher.dispatchEventually({actionType:L.a.actions.PAPER_NAV_TARGET_ADDED,navId:this.props.id,navLabel:this.props.navLabel})}componentWillUnmount(){this.context.dispatcher.dispatchEventually({actionType:L.a.actions.PAPER_NAV_TARGET_REMOVED,navId:this.props.id})}render(){const e=this.props,{navLabel:t,children:a}=e,n=R(e,["navLabel","children"]);return P.createElement("div",n,a)}}N=M,D="contextTypes",j={dispatcher:O.a.instanceOf(y.a).isRequired},D in N?Object.defineProperty(N,D,{value:j,enumerable:!0,configurable:!0,writable:!0}):N[D]=j;var F=a(714),q=a.n(F);class H extends P.PureComponent{render(){const{cardId:e,children:t,dataSeleniumSelector:a,navLabel:n}=this.props,r=this.context.envInfo.isMobile,i=q()({card:!0,card__mobile:r},this.props.className);return P.createElement(M,{id:e,"data-selenium-selector":a,navLabel:n,className:i},t)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(H,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired});class B extends P.PureComponent{render(){const e=this.context.envInfo.isMobile;return P.createElement("div",{className:q()({"card-callout":!0,"card-callout__mobile":e})},this.props.children)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(B,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired});class z extends P.PureComponent{render(){return P.createElement("div",{className:"card-container"},this.props.children)}}class V extends P.PureComponent{renderChildren(){const{title:e,subtitle:t,children:a}=this.props;return e?P.createElement(P.Fragment,null,P.createElement("h4",{className:"card-header-title__title"},e),t&&P.createElement("h5",{className:"card-header-title__subtitle"},t)):!!a&&a}render(){return P.createElement("div",{className:"card-header-title"},this.renderChildren())}}class U extends P.PureComponent{render(){return P.createElement("div",{className:"card-header-aside"},this.props.children)}}class W extends P.PureComponent{renderChildren(){const{title:e,subtitle:t,children:a}=this.props;return e?P.createElement(V,{title:e,subtitle:t}):!!a&&a}render(){const e=this.context.envInfo.isMobile,t=this.renderChildren(),a=!!P.Children.toArray(t).find(e=>e.type===U);return P.createElement("div",{className:q()({"card-header":!0,"card-header__mobile":e,"card-header__has-aside":a})},t)}}function G(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(W,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired});class K extends P.PureComponent{render(){const{children:e,willChildrenOwnLayout:t}=this.props,a=this.context.envInfo.isMobile;return P.createElement("div",{className:q()({"card-content":!0,"card-content__mobile":a,"card-content__children-own-layout":t})},e)}}G(K,"defaultProps",{willChildrenOwnLayout:!1}),G(K,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired});class Y extends P.PureComponent{render(){const{children:e}=this.props;return P.createElement("div",{className:"card-content-aside"},e)}}class Q extends P.PureComponent{render(){const{children:e}=this.props;return P.createElement("div",{className:"card-content-main"},e)}}class J extends P.PureComponent{render(){const e=this.context.envInfo.isMobile;return P.createElement("div",{className:q()({"card-footer":!0,"card-footer__mobile":e})},this.props.children)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(J,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired});class X extends P.PureComponent{render(){const e=this.context.envInfo.isMobile;return P.createElement("div",{className:q()({"card-sidebar":!0,"card-sidebar__mobile":e})},this.props.children)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(X,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired});const $=H,Z=B,ee=z,te=W,ae=K,ne=Y,re=Q,ie=J,se=X;var oe=a(797),le=a.n(oe),ce=a(796),pe=a.n(ce),ue=a(739),de=a(730),he=a(0),me=a.n(he);const be=he.List(["result","methodology","background",null]);class fe extends P.PureComponent{renderExcerptIntentTitle(e,t){return this.props.isReferenceList?P.createElement("div",{className:"citation__excerpts__intent-title"},Object(u.b)(t=>t.references.excerptIntentLabel[e])):P.createElement("div",{className:"citation__excerpts__intent-title"},Object(u.b)(t=>t.citations.excerptIntentLabel[e]),'"',P.createElement(de.a,{field:t,limit:50,expandable:!1}),'"')}render(){const{citationContexts:e,citedPaperTitle:t}=this.props,a=function(e){const t=(e,t,a)=>{const n=e.get(t)||he.List();return e.set(t,n.push(a))};return e.reduce((e,a)=>a.intents.length>0?a.intents.reduce((e,n)=>t(e,n,a.context),e):t(e,null,a.context),he.Map())}(e).sortBy((e,t)=>be.indexOf(t)),n=[...a.values()].reduce((e,t)=>e+t.size,0).toString().length;return P.createElement("div",{className:"citation__excerpts citation__excerpts__".concat(n,"-digits")},[...a.keys()].map(e=>P.createElement("div",{key:e||"null",className:"citation__excerpts__intent"},e?this.renderExcerptIntentTitle(e,t):P.createElement("div",{className:"citation__excerpts__intent-title"},Object(u.b)(e=>e.citations.excerptIntentLabel.none)),P.createElement("div",{className:"citation__excerpts__intent-citations"},a.get(e).take(10).map((t,a)=>P.createElement("div",{key:"".concat(e||"null",".").concat(a),className:"citation__excerpts__citation"},P.createElement("div",{className:"citation__excerpts__citation-text"},P.createElement(de.a,{field:t}))))))))}}var ge=a(716),Ee=a(750),ye=a(729),_e=a(25),ve=a(727),Oe=a(718),Pe=a(227),we=a(735),Se=a(12),Te=a(69);function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function xe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ne extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,a),this.state={shownBoxType:null},this.onClickAuthor=this.onClickAuthor.bind(this),this.onClickTitle=this.onClickTitle.bind(this)}isCitationInCorpus(){const{citation:e}=this.props;return!!e.id}onClickBox(e){const{shownBoxType:t}=this.state;this.setState({shownBoxType:e===t?null:e})}onClickAuthor(e){this.trackEvent("AUTHOR",null,{clickedEntityId:e})}onClickTitle(){this.props.onClickTitle&&this.props.onClickTitle(this.props.citation)}trackEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe.a;const{analyticsLocation:r}=this.context;if(!r)return void m.a.warn("Unable to track ClickEvent from component <Citation /> because it doesn't have an analytics location");const{citation:i}=this.props,s=i.id,o=Pe.a.getIn(r,e,t),l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(a),!0).forEach((function(t){ke(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{paperId:s});Object(Te.a)(n.create(o,l))}renderBoxes(){const{citation:e,citationType:t,shouldRenderIntents:a}=this.props,{shownBoxType:n}=this.state;let r=null;const i=e.citationContexts.size;i>0&&(r=P.createElement("div",Ce({key:"excerpt",className:q()({citation__boxes__box:!0,citation__box__excerpts:!0,"citation__box__is-active":"excerpt"===n}),onClick:()=>this.onClickBox("excerpt")},Object(ye.a)({id:ve.e,"paper-id":e.id,type:"excerpt","citation-type":t})),P.createElement(c.a,{icon:"hamburger",width:"9",height:"9"}),Object(_e.l)(i,Object(u.b)(e=>e.citations.excerpts.singular,i),Object(u.b)(e=>e.citations.excerpts.plural,i),!0)));let s=null;if(a){const a=e.citationContexts.reduce((e,t)=>t.intents.reduce((e,t)=>e.add(t),e),he.Set());if(a.size>0){const r=a.map(e=>Object(u.b)(t=>t.citations.intentLabels[e])),i=we.h([...r],{useAmpersand:!0});s=P.createElement("div",Ce({key:"intents",className:q()({citation__boxes__box:!0,citation__box__excerpts:!0,"citation__box__is-active":"excerpt"===n}),onClick:()=>this.onClickBox("excerpt")},Object(ye.a)({id:ve.e,"paper-id":e.id,type:"intents","citation-type":t})),Object(u.b)(e=>e.citations.intentLabel,i))}}let o=null;return e.isKey&&(o=P.createElement("div",Ce({key:"highlyInfluenced",className:q()({citation__boxes__box:!0,citation__box__flag:!0,"citation__box__is-active":"highlyInfluenced"===n}),"data-selenium-selector":"citingPapers"===t?"highlyInfluenced":"highlyInfluential",onClick:()=>this.onClickBox("highlyInfluenced")},Object(ye.a)({id:ve.e,"paper-id":e.id,type:"highlyInfluenced","citation-type":t})),P.createElement(c.a,{icon:"scorecard-highly-influential",width:"9",height:"9",className:"fill--orange"}),Object(u.b)(e=>e.citations.highlyInfluenced[t]))),r||s||o?P.createElement("div",{className:"citation__boxes"},r||s?P.createElement("div",{className:"citation__boxes__box-group"},r,s):null,o):null}renderBoxContext(e){if(!e)return null;switch(e){case"excerpt":return this.renderExcerptContext();case"highlyInfluenced":return this.renderHighlyInfluencedContext()}return m.a.warn("render method for ".concat(e," is missing")),null}renderExcerptContext(){const{citation:e,citationType:t,citedPaperTitle:a}=this.props;return P.createElement("div",{className:"citation__context__content"},P.createElement(fe,{isReferenceList:"citedPapers"===t,citationContexts:e.citationContexts,citedPaperTitle:a}))}renderHighlyInfluencedContext(){const{citationType:e,citedPaperTitle:t}=this.props,a=Object(_e.p)(t.text,50);return P.createElement("div",{className:"citation__influenced__content"},P.createElement("div",{className:"citation__influenced__content-title"},Object(u.b)(t=>t.citations.popup[e].title,a)),P.createElement("div",{className:"citation__influenced__content-body",dangerouslySetInnerHTML:{__html:Object(u.b)(t=>t.citations.popup[e].content)}}))}renderPaperMeta(){const{citation:{authors:e,fieldsOfStudy:t,venue:{text:a},year:n}}=this.props;return P.createElement("div",{className:"citation__meta"},P.createElement("ul",{className:"citation__meta__publication"},P.createElement("li",{className:"citation__meta__publication__item","data-selenium-selector":"author-list"},P.createElement(ue.a,{authors:e,max:5,onAuthorClick:this.onClickAuthor,shouldLinkToAHP:!0,heapId:ve.d})),!t.isEmpty()&&P.createElement("li",{className:"citation__meta__publication__item","data-selenium-selector":"fields-of-study"},t.join(", ")),a&&P.createElement("li",{className:"citation__meta__publication__item","data-selenium-selector":"venue-metadata"},a),Object(_e.i)(n)&&P.createElement("li",{className:"citation__meta__publication__item","data-selenium-selector":"paper-year"},n)))}renderTitle(){const{citation:{id:e,title:t,slug:a,citationContexts:n},citationType:r}=this.props;let i=null;return i=this.isCitationInCorpus()?P.createElement(ge.a,{"data-selenium-selector":"title-link",to:"PAPER_DETAIL",params:{paperId:e,slug:a},onClick:this.onClickTitle},P.createElement(de.a,{field:t})):P.createElement(Ee.a,{tooltipPosition:"bottom-left",tooltipContent:P.createElement("strong",null,Object(u.b)(e=>e.citations.notInCorpus),"."),className:"no-id-tooltip"},P.createElement(de.a,{field:t})),P.createElement("h2",Ce({className:"citation__title","data-selenium-selector":"citation-paper-title"},Object(ye.a)({id:ve.h,"paper-id":e,"citation-type":r,"has-intents":n.size>0})),i)}render(){const{shownBoxType:e}=this.state;return P.createElement("div",{className:"paper-citation","data-selenium-selector":"citation"},P.createElement("div",{className:"citation__body"},this.renderTitle(),this.renderPaperMeta(),this.renderBoxes()),P.createElement("div",{className:q()({citation__context:!0,"citation__is-visible":!!e})},this.renderBoxContext(e)))}}ke(Ne,"contextTypes",{analyticsLocation:O.a.object});var De=a(867),je=a(804);function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Le extends P.PureComponent{constructor(){super(...arguments),this.state={showingAllCitations:!1},this.trackMetaClick=this.trackMetaClick.bind(this),this.trackTitleClick=this.trackTitleClick.bind(this),this.trackIndicatorHover=this.trackIndicatorHover.bind(this),this.onClickTitle=this.onClickTitle.bind(this)}componentWillReceiveProps(){this.setState({showingAllCitations:!1})}handleAnalyticsEvent(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe.a;const r=this.context.analyticsLocation,i=this.props.result.id;if(r){const s=Pe.a.getIn(r,e,t),o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(a),!0).forEach((function(t){Ae(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{paperId:i});Object(Te.a)(n.create(s,o))}else m.a.warn("Unable to track ClickEvent from component <Citation /> because it doesn't have an analytics location")}onClickTitle(){this.trackTitleClick(),this.props.onClickTitle&&this.props.onClickTitle(this.props.result)}trackTitleClick(){this.handleAnalyticsEvent("TITLE")}trackMetaClick(e,t){this.handleAnalyticsEvent(e,null,{clickedEntityId:t})}trackIndicatorHover(e){this.handleAnalyticsEvent("STAT",null,{statName:e},je.a)}renderTitle(e){return w.a.createElement("h2",{className:"result-title","data-selenium-selector":"citation-paper-title"},w.a.createElement(de.a,{field:Se.a.fromJs(e)}))}renderCitationContexts(e,t){const a=w.a.createElement("div",null,t.map(e=>e.context).map((e,t)=>w.a.createElement(de.a,{className:"context",field:e,key:t})));return w.a.createElement(Ee.a,{className:"contexts",tooltipPosition:"bottom-left",tooltipClassName:"excerpts-tooltip",tooltipContent:a,onShow:()=>{this.trackIndicatorHover("Excerpt")}},w.a.createElement("span",{className:"boxed"},w.a.createElement(c.a,{icon:"details",width:"12",height:"12"}),_e.l(t.length,"Excerpt")))}renderInfluentialIndicator(e){const t="citingPapers"===e?"highlyInfluenced":"highlyInfluential";if(this.context.envInfo.isMobile)return w.a.createElement("span",{className:"boxed key","data-selenium-selector":t},we.l(e));const a=w.a.createElement(ge.a,{to:"PAPER_DETAIL",params:{paperId:"d5641d684df3a9e7c357923d109421fe4304ffa8",slug:"Identifying-Meaningful-Citations-Valenzuela-Ha"}},"Identifying Meaningful Citations"),n="citingPapers"===e?w.a.createElement("span",null,"The citing paper was ",w.a.createElement("strong",null,"strongly influenced")," by this paper, as defined in ",a,"."):w.a.createElement("span",null,"This reference ",w.a.createElement("strong",null,"strongly influenced")," the paper, as defined in ",a,".");return w.a.createElement(Ee.a,{tooltipClassName:"citation-influence-tooltip",tooltipPosition:"bottom-left",tooltipContent:n,onShow:()=>{this.trackIndicatorHover("Highly Influential")}},w.a.createElement("span",{className:"boxed key","data-selenium-selector":t},we.l(e)))}renderDebugInfo(e){let{keyCitationTypes:t}=e;return w.a.createElement("ul",{className:"key-citation"},t.map((e,t)=>w.a.createElement("li",{key:t},w.a.createElement("label",{className:"key"},e))))}render(){const{citationType:e,result:t}=this.props,{isKey:a,citationContexts:n,id:r,slug:i,debugInfo:s,title:o}=t,l=this.context.envInfo.isMobile,c=n.length>0&&!l;return w.a.createElement("article",{className:q()("citation",{"is-key":a}),"data-selenium-selector":"citation"},w.a.createElement("div",null,w.a.createElement("div",{className:"result-meta"},s?this.renderDebugInfo(s):null,r?w.a.createElement(ge.a,{"data-selenium-selector":"title-link",to:"PAPER_DETAIL",params:{paperId:r,slug:i},onClick:this.onClickTitle},this.renderTitle(o)):w.a.createElement(Ee.a,{tooltipPosition:"bottom-left",tooltipContent:w.a.createElement("strong",null,"Sorry, this paper is not in our corpus."),className:"no-id-tooltip"},this.renderTitle(o)),w.a.createElement(De.a,{paper:t,onClick:this.trackMetaClick})),a||c?w.a.createElement("div",{className:"boxes"},a?this.renderInfluentialIndicator(e):null,c?this.renderCitationContexts(e,n):null):null))}}Ae(Le,"propTypes",{citationType:O.a.string.isRequired,sort:O.a.string.isRequired,result:O.a.object.isRequired,index:O.a.number.isRequired,onClickTitle:O.a.func}),Ae(Le,"contextTypes",{analyticsLocation:O.a.object,envInfo:O.a.instanceOf(A.a).isRequired});var Re=a(719),Me=a(61),Fe=a(164);class qe extends P.PureComponent{render(){const{paper:e,type:t,isFiltered:a}=this.props;if("citingPapers"===t&&a)return w.a.createElement("div",{className:"empty-pdp-box"},Me.a.getString("citations.emptyFiltered.text"));const n="citingPapers"===t?Me.a.getString("citations.empty.text"):Me.a.getString("references.empty.text");if(e.isACM()&&"citedPapers"===t){const{url:t}=e.getLinkByType(Fe.a.ACM);return w.a.createElement("div",{className:"empty empty-acm-citations"},w.a.createElement("p",null,Me.a.getString("citations.emptyAcm.text")),w.a.createElement("p",null,Me.a.getString("citations.emptyAcm.linkLabel")," ",w.a.createElement(Re.a,{href:t},t),"."))}return w.a.createElement("div",{className:"empty-pdp-box"},n)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(qe,"propTypes",{paper:O.a.object.isRequired,type:O.a.string.isRequired,isFiltered:O.a.boolean});var He=a(722),Be=a(748),ze=a(751),Ve=a(857),Ue=a(723),We=a(949);function Ge(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ke extends P.PureComponent{onChangeFilter(e){const t="string"==typeof e?e:e.target.value;this.props.onChangeFilter&&this.props.onChangeFilter(t);const a=this.context.analyticsLocation;if(a){const e=Pe.a.getIn(a,"FILTER_BY");Object(Te.a)(We.a.create(e,{filter:t,heapId:ve.f}))}else Object(Te.a)(We.a.create(Pe.a.FILTER_BY,{filter:t,heapId:ve.f}))}renderOptions(){return w.a.createElement("select",{className:"legacy__select",onChange:this.onChangeFilter.bind(this),value:this.props.intent,"data-selenium-selector":"intent-filter-select"},this.props.options.map(e=>w.a.createElement("option",{value:e.id,key:e.id},Me.a.getString("filter.".concat(e.id,".label")))))}render(){const{className:e,labelText:t}=this.props,a=q()(e,"search-control-button select--no-styles--no-flex"),n=this.context.envInfo.isMobile?t:w.a.createElement(Ee.a,{className:"flex-row-vcenter",tooltipPosition:"bottom-left",tooltipContent:w.a.createElement(Ue.a,{content:Object(u.b)(e=>e.citations.intents.tooltip)})},t,w.a.createElement(Ve.a,{className:"fill--gray",height:"12",width:"12"}));return w.a.createElement("div",{className:a},w.a.createElement("label",{className:"search-control-button-label"},n),this.renderOptions())}}Ge(Ke,"propTypes",{className:O.a.string,intent:O.a.string,labelText:O.a.string,onChangeFilter:O.a.func,options:O.a.instanceOf(me.a.List).isRequired}),Ge(Ke,"contextTypes",{analyticsLocation:O.a.object,envInfo:O.a.instanceOf(A.a).isRequired}),Ge(Ke,"defaultProps",{labelText:"Citation Type:"});var Ye=a(862),Qe=a(858),Je=a(848);function Xe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class $e extends P.PureComponent{onChangeSort(e){const t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);const a=this.context.analyticsLocation;if(a){const e=Pe.a.getIn(a,"SORT_BY");Object(Te.a)(Je.a.create(e,{sort:t}))}else Object(Te.a)(Je.a.create(Pe.a.SORT_BY,{sort:t}))}renderOptions(){return w.a.createElement("select",{className:"legacy__select",onChange:this.onChangeSort.bind(this),value:this.props.sort,"data-selenium-selector":"sort-select"},this.props.options.map(e=>w.a.createElement("option",{value:e.id,key:e.id},Me.a.getString("sort.".concat(e.id,".label")))))}render(){const{className:e,labelText:t}=this.props,a=q()(e,"search-control-button select--no-styles--no-flex author-publications-list-sorts");return w.a.createElement("div",{className:a},w.a.createElement("label",{className:"search-control-button-label"},t),this.renderOptions())}}Xe($e,"propTypes",{className:O.a.string,sort:O.a.string,labelText:O.a.string,onChangeSort:O.a.func,options:O.a.instanceOf(me.a.List).isRequired}),Xe($e,"contextTypes",{analyticsLocation:O.a.object}),Xe($e,"defaultProps",{labelText:"Sort by:"});var Ze=a(53),et=a(20),tt=a(14),at=a(9),nt=a(33),rt=a(104),it=a(16),st=a.n(it);function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class lt extends P.PureComponent{constructor(){super(...arguments),ot(this,"getQueryParametersForType",e=>{const t=this.context.paperStore.getPaperDetail().get(e),a=Ze.a.CITATIONS_PAGE_SIZE;let n={};n[e+"Sort"]=t.get("sort"),n[e+"Limit"]=a,n[e+"Offset"]=(t.pageNumber-1)*a;const r=t.get("citationIntent");return"citingPapers"===e&&r&&r!==Ze.a.INTENTS.ALL_INTENTS.id&&(n.citationIntent=r),"citingPapers"===e&&t.yearFilter&&(n.year=[t.yearFilter.get("min"),t.yearFilter.get("max")]),n}),ot(this,"getQueryParametersForAll",()=>st()({tab:this.context.paperStore.tab},this.getQueryParametersForType("citingPapers"),this.getQueryParametersForType("citedPapers"))),ot(this,"updateQuery",e=>{const t={paperId:this.context.paperStore.getPaperDetail().paper.id,slug:this.context.paperStore.getPaperDetail().paper.slug};this.context.history.push(Object(at.d)({routeName:"PAPER_DETAIL",params:t,query:e}))}),ot(this,"onChangeSort",e=>{const t=this.getQueryParametersForAll();t["".concat(this.props.citationType,"Sort")]=e,this.updateQuery(t)}),ot(this,"onChangeIntentFilter",e=>{const t=this.getQueryParametersForAll();e&&e!==Ze.a.INTENTS.ALL_INTENTS.id?t.citationIntent=e:delete t.citationIntent,this.updateQuery(t)}),ot(this,"renderListLabel",()=>{const{citationPage:{citationType:e,loading:t,pageNumber:a,totalCitations:n,citationIntent:r,yearFilter:i},citationCoverage:o,showSummary:l}=this.props,c=i&&i.get("min")&&0!==i.get("min")||i&&i.get("max")&&0!==i.get("max")||r&&"all"!==r&&"citingPapers"===e;if(!l)return null;const p=c?_e.l(n,Me.a.getString("citations.list.label.filtered.".concat(e)),Me.a.getString("citations.list.label.filtered.".concat(e,"Plural"))):_e.l(n,Me.a.getString("citations.list.label.".concat(e)),Me.a.getString("citations.list.label.".concat(e,"Plural"))),u=(a-1)*Ze.a.CITATIONS_PAGE_SIZE+1,d=Math.min(a*Ze.a.CITATIONS_PAGE_SIZE,n),h=Me.a.getString("citations.list.range",u,d,p),m=o&&!c?Me.a.getString("citations.list.coverageEstimate",h,o):h,b=!o||c||this.context.envInfo.isMobile?m:P.createElement(Ee.a,{className:"flex-row-vcenter",tooltipContent:Me.a.getString("citations.list.tooltip",o)},m,P.createElement(Ve.a,{className:"fill--gray",height:"12",width:"12"}));return t?P.createElement("div",{className:"citation-list__label"},P.createElement("span",null,P.createElement(s.a,null)," Loading ")):P.createElement("div",{className:"citation-list__label","data-selenium-selector":"citation-list-header"},b)})}render(){const e=this.context.envInfo.isMobile,t=this.context.weblabStore.isFeatureEnabled(k.b.PDPCitationIntents),a="citingPapers"===this.props.citationType,n=this.props.showSummary,r=this.props.citationPage.citationIntent,i=r&&"all"!=r,s=e?"controls-split":"controls-right",o=e?"controls-full":"controls-right",l=e||a?null:"select--no-styles--inline",c=this.props.totalPages>1?P.createElement("div",{className:a?s:o},P.createElement(Ye.a,{experiment:tt.b.RerankedCitations,eligibilityTest:()=>!!this.props.allowRelevanceSort},P.createElement(ze.b,null,P.createElement($e,{onChangeSort:this.onChangeSort,options:nt.a.citations(),sort:this.props.sort,labelText:Me.a.getString("citations.list.sortByLabel"),className:l})),P.createElement(ze.c,{variation:tt.b.RerankedCitations.Variation.ENABLE_RELEVANCE},P.createElement($e,{onChangeSort:this.onChangeSort,options:nt.a.citationsExperimental(),sort:this.props.sort,labelText:Me.a.getString("citations.list.sortByLabel"),className:l})))):null,p=a&&(this.props.totalPages>1||i)?P.createElement("div",{className:e?"controls-split":"controls-left"},P.createElement(Ke,{onChangeFilter:this.onChangeIntentFilter,options:Ze.a.getIntents(),intent:r,labelText:Me.a.getString("citations.list.filterByIntentLabel")})):null;if(t&&a&&!e){const e=n?"controls":"controls__no-line";return P.createElement("div",null,P.createElement("div",{className:e},p,c),n&&this.props.citationPage.totalCitations>1?this.renderListLabel():null)}if(t&&e)return n?P.createElement("div",null,this.props.citationPage.totalCitations>1?this.renderListLabel():null):P.createElement("div",null,P.createElement("div",{className:"controls__no-line"},p,c));if(t&&!a&&!e){const e=n?"controls":"controls__no-line";return P.createElement("div",{className:e},n&&this.props.citationPage.totalCitations>1?this.renderListLabel():null,c)}return P.createElement("div",{className:"controls"},this.props.citationPage.totalCitations>1&&this.renderListLabel(),this.props.totalPages>1&&P.createElement("div",{className:e?"":"controls-right"},P.createElement(Ye.a,{experiment:tt.b.RerankedCitations,eligibilityTest:()=>!!this.props.allowRelevanceSort},P.createElement(ze.b,null,P.createElement(Qe.a,{onChangeSort:this.onChangeSort,options:nt.a.citations(),sort:this.props.sort,labelText:Me.a.getString("citations.list.sortByLabel")})),P.createElement(ze.c,{variation:tt.b.RerankedCitations.Variation.ENABLE_RELEVANCE},P.createElement(Qe.a,{onChangeSort:this.onChangeSort,options:nt.a.citationsExperimental(),sort:this.props.sort,labelText:Me.a.getString("citations.list.sortByLabel")})))))}}ot(lt,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired,history:O.a.instanceOf(_.a).isRequired,paperStore:O.a.object.isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});var ct=a(149),pt=a(786),ut=a(158);var dt=le()({displayName:"SimpleCitationsList",mixins:[pe.a,ut.a.Mixin],propTypes:{allowRelevanceSort:O.a.bool,citationCoverage:O.a.string,citationPage:O.a.object.isRequired,keyTotal:O.a.number,paper:O.a.object.isRequired,name:O.a.string},contextTypes:{api:O.a.instanceOf(ct.a).isRequired,envInfo:O.a.instanceOf(A.a).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired},getInitialState(){return this.buildStateFromProps(this.props)},buildStateFromProps(e){const t=e.citationPage.sort,a=e.citationPage.citations,n=a.size,r=Math.floor(Math.random()*Math.min(10,n));if(a.isEmpty())return{swapIndex:r,citations:a};if(t===nt.a.YEAR.id&&a.get(0).year!==a.get(r).year)return{swapIndex:0,swappedCitations:a};const i=a.withMutations(e=>{const t=e.get(r);return e.set(r,e.get(0)).set(0,t)});return{swapIndex:r,swappedCitations:i}},componentWillReceiveProps(e){e.citationPage.equals(this.props.citationPage)||this.setState(this.buildStateFromProps(e))},getCitations(){return this.context.weblabStore.isFeatureEnabled(k.b.CitationsSwap)?this.state.swappedCitations:this.props.citationPage.citations},navigateToCitationPage(e){const t=this.props.citationPage.get("citationType");this.changeCitationsAndReferencesPage(t,e)},renderCitationsList(){const e=this.getCitations(),t=this.props.citationPage.citationType;return e.isEmpty()?null:e.map((e,a)=>w.a.createElement(Le,{citationType:t,sort:this.props.citationPage.sort,result:e,key:e.id+a,index:a,onClickTitle:this.trackClickCitationLink}))},renderCitationsListWithIntents(){const{paper:e,citationPage:t}=this.props,a=this.getCitations();if(a.isEmpty())return null;const n=t.get("citationType");return w.a.createElement("div",{className:"citation-list__citations"},a.map((t,a)=>w.a.createElement(Ne,{key:t.id+a,citedPaperTitle:e.title,shouldRenderIntents:"citingPapers"===n,citation:t,citationType:n,onClickTitle:this.trackClickCitationLink})))},hasCitations(){const{paper:e,citationPage:t}=this.props,{citationType:a,totalCitations:n}=t;return"citedPapers"===a&&e.isACM()?e.citationStats.numKeyReferences>0:n>0},trackClickCitationLink(e){const{paper:t,citationPage:a}=this.props,{citationType:n,pageNumber:r,sort:i}=a,s=this.getCitations(),o=this.context.weblabStore.isFeatureEnabled(k.b.CitationsSwap)?this.state.swapIndex:null;Object(pt.d)({paperId:t.id,section:"citingPapers"===n?pt.a:pt.b,sortOrder:i,page:r,paperList:s,clickedPaper:e,swapPosition:o})},renderEmptyMessage(){const{paper:e,citationPage:t}=this.props,{citationType:a,citationIntent:n,yearFilter:r}=t,i=n&&"all"!==n||r&&r.get("min")&&0!==r.get("min")||r&&r.get("max")&&0!==r.get("max");return w.a.createElement(qe,{paper:e,type:a,isFiltered:i})},render(){const e=this.context.envInfo.isMobile,t=this.props.citationPage,a=t.get("loading"),n=t.totalPages>1?w.a.createElement("div",{className:"citation-pagination flex-row-vcenter"},a?w.a.createElement("span",{className:"flex-row-vcenter citation-loading"},w.a.createElement(s.a,null)," Loading"):null,w.a.createElement(Be.a,{pageNumber:this.props.citationPage.pageNumber,loadPage:this.navigateToCitationPage,totalPages:t.totalPages})):null,r=this.hasCitations()?w.a.createElement(He.c,{feature:k.b.PDPCitationIntents},w.a.createElement(He.a,null,this.renderCitationsList()),w.a.createElement(He.b,null,this.renderCitationsListWithIntents())):this.renderEmptyMessage();return w.a.createElement("div",{className:"paper-detail-content-card","data-selenium-selector":"citingPapers"===t.citationType?"cited-by":"reference"},w.a.createElement(lt,{allowRelevanceSort:this.props.allowRelevanceSort,paper:this.props.paper,citationCoverage:this.props.citationCoverage,citationPage:this.props.citationPage,keyTotal:this.props.keyTotal,sort:t.sort,totalPages:t.totalPages,citationType:t.citationType,useButtons:!e,showSummary:!0}),r,n)}}),ht=a(904),mt=a(824);function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class ft extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),this.state={isToggleOpen:!1},this.toggleIcon=this.toggleIcon.bind(this)}toggleIcon(){const e=!this.state.isToggleOpen;this.setState({isToggleOpen:e})}render(){const{children:e,icon:t,isMobile:a,mobileToggle:n,title:r}=this.props;let i;if(a&&n){const e=this.state.isToggleOpen;i={icon:e?"x":t,className:e?"paper-card__stats-item toggle-open":"paper-card__stats-item",isCollapsible:!0,startsOpen:!0,onToggle:this.toggleIcon}}else i={className:"paper-card__stats-item"};return P.createElement(mt.a,bt({title:r?r.toUpperCase():null},i),e)}}a(94);class gt extends P.PureComponent{render(){const{displayInfluentialCitations:e,stats:{numKeyCitations:t,citationAcceleration:a,citationVelocity:n}}=this.props,r=e?P.createElement("li",{className:"paper-card__citation-stats-enum__stat"},P.createElement("p",{className:"citation-stat",dangerouslySetInnerHTML:{__html:Me.a.getString("paperDetail.aside.citationStatsEnum.highlyInfluenced",Object(_e.e)(t))}})):null,i=a.shouldDisplay()?P.createElement("li",{className:"paper-card__citation-stats-enum__stat"},P.createElement("p",{className:"citation-stat",dangerouslySetInnerHTML:{__html:Me.a.getString("paperDetail.aside.citationStatsEnum.acceleration.stat",Object(_e.e)(Math.round(100*a.value)),n.lastYear,n.lastYear-1)}})):null,s=n.shouldDisplay()?P.createElement("li",{className:"paper-card__citation-stats-enum__stat"},P.createElement("p",{className:"citation-stat",dangerouslySetInnerHTML:{__html:Me.a.getString("paperDetail.aside.citationStatsEnum.velocity.stat",Object(_e.e)(Math.round(n.value)),n.firstYear,n.lastYear)}})):null;return P.createElement("ul",{className:"paper-card__citation-stats-enum"},r,s,i)}}var Et=a(244);function yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _t extends P.PureComponent{constructor(){super(...arguments),yt(this,"updatePaperRoute",(e,t)=>{const a=this.context.paperStore.getPaperDetail(),n={year:[e,t],citingPapersSort:a.citingPapers.sort,citationIntent:a.citingPapers.citationIntent},r={paperId:a.paper.id,slug:a.paper.slug};this.context.history.push(Object(at.d)({routeName:"PAPER_DETAIL",params:r,query:n}))}),this.state=this.stateFromPaperStore(),this.context.paperStore.registerComponent(this,()=>{this.setState(this.stateFromPaperStore())})}stateFromPaperStore(){return{yearFilter:this.context.paperStore.getPaperDetail().citingPapers.yearFilter}}renderCitationsHistogram(e){const t=this.context.envInfo.isMobile,a=this.props.stats,n=a.citedByBuckets.map(e=>{let{count:t,startKey:a}=e;return Object(Et.a)({count:t,year:a})}),r=e?P.createElement("div",{className:"paper-detail__card__histogram-label"},e):null,i=t?"year-filter__histogram__centered":null;return P.createElement("div",{className:"paper-detail__card__histogram"},P.createElement(ht.a,{analyticsEvent:Pe.a.PaperDetail.Citations.YEAR_SLIDER,filters:a,filterCallback:this.updatePaperRoute,histogramHeight:100,histogramWidth:225,yearBuckets:n,yearFilter:this.state.yearFilter,popoverLabel:Me.a.getString("citations.histogram.popoverLabel"),wrapperClass:i}),r)}render(){const e=this.context.envInfo.isMobile,t=e?"":Me.a.getString("citations.stats.desktop.title"),a=e?Me.a.getString("citations.histogram.mobile.title"):Me.a.getString("citations.histogram.desktop.title"),n=this.props.stats,r=this.props.citationPage,i=n.numKeyCitations>0,s=i||n.citationAcceleration.shouldDisplay();return P.createElement("div",{className:"paper-detail__card__histogram"},P.createElement(ft,{title:a,icon:"filter",isMobile:e,mobileToggle:!0},P.createElement(He.c,{feature:k.b.PDPCitationIntents},P.createElement(He.a,null,this.renderCitationsHistogram()),P.createElement(He.b,null,e&&r?P.createElement(lt,{paper:this.props.paper,citationCoverage:this.props.citationCoverage,citationPage:this.props.citationPage,keyTotal:this.props.keyTotal,sort:r.sort,totalPages:r.totalPages,citationType:r.citationType,useButtons:!0,showSummary:!1}):null,this.renderCitationsHistogram(e?Object(u.b)(e=>e.citations.histogram.mobile.label):null)))),s?P.createElement(ft,{title:t,isMobile:e},P.createElement(gt,{stats:n,displayInfluentialCitations:i})):null)}}yt(_t,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired,history:O.a.instanceOf(_.a).isRequired,paperStore:O.a.instanceOf(ut.a).isRequired});var vt=a(757),Ot=a(43),Pt=a(912),wt=a(238);function St(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Tt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ct extends P.PureComponent{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?St(Object(a),!0).forEach((function(t){Tt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({wasSeen:!1,top:0,bottom:0},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())}),this.onScroll=Object(vt.a)(this.onScroll.bind(this),250,{leading:!0,maxWait:250,trailing:!0}),this.onResize=Object(vt.a)(this.onResize.bind(this),250,{leading:!0,maxWait:250,trailing:!0}),this.setLandmarkRef=this.setLandmarkRef.bind(this)}getStateFromWeblabStore(){return{isLoggingEnabled:this.context.weblabStore.isFeatureEnabled(k.b.LogHeapLandmarks)}}onScroll(){this.updateOffsets(this.trackLandmark)}onResize(){this.updateOffsets(this.trackLandmark)}isInViewport(e){const{top:t,bottom:a}=this.state;return a>=e.top&&t<=e.top+e.height}trackLandmark(){const{wasSeen:e,isLoggingEnabled:t}=this.state;if(e)return;if(!t)return;const{target:a,section:n}=this.props,r=wt.a.fromDOM(document);if(this.isInViewport(r)&&!e){const e=+(100*(r.top/(r.top+r.height+r.bottom)||0)).toFixed(2);Object(Te.a)(Pt.a.create(a,{section:n,percent:e})),this.setState({wasSeen:!0})}}updateOffsets(e){var t;const a=Ot.a.offsetFromBody(this.landmarkRef)||0,n=(null!=(t=this)&&null!=(t=t.landmarkRef)?t.scrollHeight:t)||0;this.setState({top:a,bottom:a+n},e)}componentDidMount(){this.updateOffsets(this.trackLandmark),Ot.a.listenForScroll(this.onScroll),Ot.a.listenForResize(this.onResize)}componentWillUnmount(){Ot.a.stopListeningForResize(this.onResize),Ot.a.stopListeningForScroll(this.onScroll)}setLandmarkRef(e){this.landmarkRef=e}render(){const{isLoggingEnabled:e}=this.state;return P.createElement(P.Fragment,null,e&&P.createElement("a",{key:"landmark",className:"heap-landmark",ref:this.setLandmarkRef}),P.createElement(P.Fragment,{key:"children"},this.props.children))}}Tt(Ct,"contextTypes",{weblabStore:O.a.instanceOf(rt.b).isRequired});class xt extends P.PureComponent{static getTabLabel(e){var t;const a=(null!=(t=e)&&null!=(t=t.paperDetail)&&null!=(t=t.citingPapers)?t.totalCitations:t)||0;return Object(u.b)(e=>e.paperDetail.tabLabels.citingPapers,a.toLocaleString())}static hasContent(e){var t,a,n;if(((null!=(n=e)&&null!=(n=n.paperDetail)&&null!=(n=n.citingPapers)?n.totalCitations:n)||0)>0)return!0;const r=null!=(a=e)&&null!=(a=a.paperDetail)&&null!=(a=a.citingPapers)?a.citationIntent:a,i=null!=(t=e)&&null!=(t=t.paperDetail)&&null!=(t=t.citingPapers)?t.yearFilter:t;return!!(i&&i.get("min")&&0!==i.get("min")||i&&i.get("max")&&0!==i.get("max")||r&&"all"!==r)}render(){const{paper:e,paper:{citationStats:t,citationStats:{estNumCitations:a,numCitations:n,numKeyCitations:r}},citingPapers:i,skipperExperiments:s}=this.props.paperDetail,o=this.constructor.getTabLabel(this.props),l=this.props.isMobile?Object(u.b)(e=>e.paperDetail.sectionSubtitles.citingPapersMobile):Object(u.b)(e=>e.paperDetail.sectionSubtitles.citingPapers),c=a>n.value?(100*n.value/a).toFixed():null,p=s.memberOf(tt.b.RerankedCitations.KEY);return P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:Object(u.b)(e=>e.paperDetail.sectionTitles.citingPapers)},P.createElement($,{cardId:this.constructor.CARD_ID,navLabel:o,className:"citing-papers"},P.createElement(te,{title:Object(u.b)(e=>e.paperDetail.sectionTitles.citingPapers),subtitle:l}),t.numCitations.shouldDisplay()?P.createElement(ae,{willChildrenOwnLayout:!0},P.createElement(re,null,P.createElement(dt,{allowRelevanceSort:p,name:"citingPapers",paper:e,citationCoverage:c,citationPage:i,citationTotal:i.totalCitations,keyTotal:r})),P.createElement(ne,null,P.createElement(Z,null,P.createElement(_t,{paperId:e.id,stats:t,paper:e,citationCoverage:c,citationPage:i,keyTotal:r})))):P.createElement(ae,null,P.createElement(dt,{name:"citingPapers",allowRelevanceSort:p,paper:e,citationPage:i,keyTotal:r}))))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(xt,"CARD_ID","citing-papers");a(27);var kt=a(2),Nt=a.n(kt);function Dt(e){const{paper:t,paper:{debugInfo:a,journal:n},skipperExperiments:r}=e;if(!a)return null;const i=a.sourceIds.map((e,t)=>{let a;const n=e.source.id;"DBLP"===n?a="http://www.dblp.org/rec/bibtex/"+e.id:"CiteSeerX"===n&&(a="http://citeseerx.ist.psu.edu/viewdoc/summary?doi="+e.id);const r=P.createElement("span",null,P.createElement("span",{className:"source"},n),":"," ",P.createElement("span",{className:"id"},e.id));let i;return i=void 0===a?r:P.createElement("a",{href:a},r),P.createElement("li",{key:"src-id-".concat(t),className:"debug-info"},i)}),s=a.sourceUris.map((e,t)=>P.createElement("li",{key:"src-uri-".concat(t),className:"source-uri debug-info"},P.createElement("a",{href:e},e))),o=a.duplicateIds.map((e,t)=>P.createElement("li",{key:"dupe-".concat(t)},"Duplicate ID: ",e)),l=null!==n?P.createElement("li",{key:"journal-info",className:"debug-info"},"Journal: ",n.name||"No Journal Name",", ",n.volume||"Missing Volume",", ",n.pages||"Missing Pages"):P.createElement("li",{key:"journal-info",className:"debug-info"},"No Journal Info"),c=null!=a.earliestAcquisitionDate?P.createElement("li",{key:"acquisition-date",className:"debug-info"},"Earliest Acquisition Date: ",Nt.a.unix(a.earliestAcquisitionDate).utc().format("MM-DD-YYYY HH:mm z")):P.createElement("li",{key:"acquisition-date",className:"debug-info"},"Earliest Acquisition Date: Unknown"),p=P.createElement("li",{key:"fields-of-study",className:"debug-info"},"Fields Of Study: ",Object(we.m)(t.fieldsOfStudy)),u=P.createElement("li",{key:"corpusId",className:"debug-info"},"Corpus Id: ",a.corpusId||"Unknown"),d=r?r.all():me.a.List(),h=d.isEmpty()?null:P.createElement("li",{key:"skipperExperiments",className:"debug-info"},P.createElement("div",null,"Member of the following Skipper Experiments (",P.createElement("a",{href:"/api/1/skipper/experiments/paper/".concat(t.id),target:"_blank"},"see raw data"),"):"),P.createElement("ul",{style:{paddingLeft:"20px"}},d.map(e=>P.createElement("li",{key:e.experimentName},e.experimentName))));return P.createElement("ul",null,i.concat(s,o,l,c,p,u,h))}var jt=a(823),It=a(732),At=a(830),Lt=a(958),Rt=a(814);function Mt(e){let{figures:t,paperId:a,slug:n}=e;const[r,i]=P.useState(!0),s=Object(Rt.a)(e=>e.weblabStore,e=>{switch(e.getVariation(tt.b.PDPFigureLimit.KEY)){case tt.b.PDPFigureLimit.Variation.CAP_AT_4:return 4;case tt.b.PDPFigureLimit.Variation.CAP_AT_8:return 8;default:return Number.POSITIVE_INFINITY}}),o=r&&t.size>s?t.slice(0,s):t,l=t.size-o.size;return P.createElement(P.Fragment,null,P.createElement("ul",{className:"flex-row paper-detail-figures-list","data-selenium-selector":"figure-list"},o.map((e,t)=>P.createElement("li",{key:e.uri,"data-selenium-selector":"figure-list-item"},P.createElement(ge.a,{to:"PAPER_DETAIL_FIGURE",onClick:()=>function(e){let{paperId:t,figureIndex:a}=e;Object(Te.a)(Oe.a.create(Pe.a.FIGURE,{paperId:t,index:a}))}({paperId:a,figureIndex:t}),params:{paperId:a,slug:n,figureIndex:t}},P.createElement(Lt.a,{figure:e}))))),l>0&&P.createElement(At.default,{label:P.createElement(It.default,{onClick:()=>i(!1),label:Object(u.b)(e=>e.paperDetail.figureShowMoreLabel,l.toLocaleString())})}))}var Ft=a(724),qt=a(725),Ht=a(875);function Bt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class zt extends P.PureComponent{constructor(){super(...arguments),this.state={boxPosition:{},isPreviewShown:!1},this.ref=null,this.hideTimer=null,this.showTimer=null,this.getRef=this.getRef.bind(this),this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}showPreview(){"function"==typeof this.props.onShow&&this.props.onShow(),this.setState(()=>({boxPosition:this.calculateBoxPosition(),isPreviewShown:!0}))}hidePreview(){this.setState(()=>({isPreviewShown:!1}))}onMouseEnter(){clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.showTimer=setTimeout(()=>{this.showPreview()},this.props.showDelayMs)}onMouseLeave(){clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(()=>{this.hidePreview()},this.props.hideDelayMs)}getRef(e){this.ref=e}calculateBoxPosition(){const e=Ot.a.getViewportSize();if(!this.ref||!e||!window)return{position:"top-left",topPx:0,leftPx:0};const t=this.ref.getBoundingClientRect(),a=t.y+t.height/2+window.scrollY<window.scrollY+e.height/2?"bottom":"top",n=t.x+t.width/2+window.scrollX,r=window.scrollX+e.width/3,i=window.scrollX+e.width/3*2,s=n<r?"right":i<n?"left":"center";return{position:"".concat(a,"-").concat(s),topPx:("top"===a?t.top:t.top+t.height)+window.scrollY,leftPx:t.left+t.width/2+window.scrollX}}renderPreviewBox(){const{previewBox:e}=this.props,{boxPosition:t}=this.state;return!w.a.Children.toArray(e).find(e=>e.type!==Ht.a)?w.a.cloneElement(e,t):w.a.createElement(Ht.a,t,e)}render(){const{isPreviewShown:e}=this.state;return w.a.createElement("span",{className:"preview-box__target",ref:this.getRef,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children,e&&this.renderPreviewBox())}}Bt(zt,"propTypes",{previewBox:O.a.node.isRequired,children:O.a.node.isRequired,onShow:O.a.func,hideDelayMs:O.a.number}),Bt(zt,"defaultProps",{hideDelayMs:200,showDelayMs:150});var Vt=a(738);function Ut(){return(Ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class Wt extends P.PureComponent{constructor(){super(...arguments),this.handleEntityHover=this.handleEntityHover.bind(this)}handleEntityHover(){const{entityId:e,name:t}=this.props,a=je.a.create(Pe.a.Entity.PREVIEW,{entityId:e,entityName:t});Object(Te.a)(a)}renderEntityStats(){const{entityMeta:e}=this.props,t=e&&e.relatedEntityCount;return t?P.createElement("div",{className:"entity-stats"},P.createElement("div",{className:"entity-stats-div"},P.createElement("span",{className:"entity-stats-count"},t.toLocaleString())," Connections")):null}renderPreviewBox(){const{children:e,entityId:t,slug:a,name:n,entityMeta:r}=this.props;if(e)return e;const i=r?r.definition:"",s=i?P.createElement(Vt.a,{text:i,truncateByDefault:!0}):null;return P.createElement("div",{className:"entity-preview-box","data-selenium-selector":"entity-preview-box"},P.createElement("div",{className:"entity-preview-box-hover-text"},P.createElement(ge.a,{className:"entity-preview-box-link",to:"ENTITY",params:{slug:a,entityId:t}},n),s),P.createElement(He.c,{feature:k.b.PreviewBoxEntityStats},P.createElement(He.b,null,this.renderEntityStats())))}render(){const{entityId:e,slug:t,name:a}=this.props;return P.createElement("li",Ut({className:"entity-group-item","data-selenium-selector":"entity-name"},Object(ye.a)({id:ve.j})),P.createElement(zt,{previewBox:this.renderPreviewBox(),onShow:this.handleEntityHover},P.createElement(ge.a,{to:"ENTITY",params:{slug:t,entityId:e}},a)))}}function Gt(e){let{cols:t,entities:a,entitiesMeta:n}=e;if(a.isEmpty()||t<1)return null;const r=Array.from({length:t}).map(()=>[]),i=Math.ceil(a.size/t);return a.forEach((e,t)=>{const a=Math.floor(t/i);r[a].push(e)}),w.a.createElement("div",{className:"entity-columns","data-selenium-selector":"entities-list"},w.a.createElement(Ft.a,{wrap:!0},r.map((e,t)=>w.a.createElement(qt.a,{key:t},w.a.createElement("ul",{className:"entity-column"},e.map((e,t)=>{let{id:a,slug:r,name:i}=e;return w.a.createElement(Wt,{key:t,entityMeta:n?n[a]:null,entityId:a,slug:r,name:i})}))))))}function Kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Yt extends P.PureComponent{constructor(){super(...arguments),this.state={entitiesMeta:null}}getEntityColumnCount(){const e=this.props.desktopColumns||3;return this.context.envInfo.isMobile?1:e}renderOnlyTopics(){const{entities:e}=this.props.paperDetail.paper;return w.a.createElement(Gt,{cols:this.getEntityColumnCount(),entities:e,entitiesMeta:this.state.entitiesMeta})}fetchEntitiesMeta(){const{api:e}=this.context,t=this.props.paperDetail.paper.entities.map(e=>e.id);e.fetchEntitiesByIds(t).then(e=>{this.setState({entitiesMeta:e.resultData.entities})}).catch(e=>m.a.warn(e))}componentDidMount(){setTimeout(()=>this.fetchEntitiesMeta(),100)}render(){const{entities:e}=this.props.paperDetail.paper;return e.isEmpty()?null:this.renderOnlyTopics()}}Kt(Yt,"propTypes",{paperDetail:O.a.instanceOf(et.f).isRequired,desktopColumns:O.a.number}),Kt(Yt,"contextTypes",{api:O.a.instanceOf(ct.a).isRequired,envInfo:O.a.object.isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});var Qt=a(806),Jt=a(733);class Xt extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),this.state={isExpanded:!!e.defaultExpanded},this.onHeaderClick=this.onHeaderClick.bind(this)}getExpandedState(){return"boolean"==typeof this.props.isExpanded?this.props.isExpanded:this.state.isExpanded}toggleExpanded(){this.setState(e=>({isExpanded:!e.isExpanded}),()=>{this.props.onToggle&&this.props.onToggle({isExpanded:this.getExpandedState()})})}onHeaderClick(){this.toggleExpanded()}render(){const{header:e,body:t}=this.props,a=this.getExpandedState();return w.a.createElement("div",{className:q()("collapsible",{"collapsible--collapsed":!a,"collapsible--expanded":a})},w.a.createElement("div",{className:"collapsible__header",onClick:this.onHeaderClick},w.a.createElement("div",{className:"collapsible__chevron"},w.a.createElement(Jt.a,{animate:!0,direction:a?Jt.a.Direction.DOWN:Jt.a.Direction.Right})),e),w.a.createElement("div",{className:"collapsible__body"},t))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Xt,"propTypes",{body:O.a.node.isRequired,defaultExpanded:O.a.bool,header:O.a.node.isRequired,isExpanded:O.a.bool,onToggle:O.a.func});var $t=a(229),Zt=a(112);function ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ta extends P.PureComponent{componentDidMount(){this.trackAnalytics()}trackAnalytics(){const{paper:e}=this.props.paperDetail;return!e.faqs||e.faqs.isEmpty()?null:this.context.weblabStore.isFeatureEnabled(k.b.PDPPaperFAQSCSOnly)&&!e.isFieldOfStudy(Zt.a.COMPUTER_SCIENCE)?null:this.context.weblabStore.isFeatureEnabled(k.b.PDPPaperFAQSNumericalOnly)&&!e.faqs.find(e=>1===e.questionId)?null:void(this.context.weblabStore.isFeatureEnabled(k.b.PDPPaperFAQSNumericalOnly)?Object(Te.a)($t.a.create(Pe.a.PaperDetail.VIEW_QUANT_RESULTS)):Object(Te.a)($t.a.create(Pe.a.PaperDetail.VIEW_FULL_FAQ)))}renderQuantitativeResults(){const e=this.props.paperDetail.paper.faqs.find(e=>1===e.questionId);if(!e)return null;const t=Me.a.getString("paperDetail.paperFAQs.quantitativeResultsTitle");return w.a.createElement(Qt.a,{section:"paper-faqs",title:t,className:"paper-detail page-section--left"},w.a.createElement("ul",{className:"paper-faqs__answer-list"},e.answers.map((e,t)=>w.a.createElement("li",{key:t,className:"paper-faqs__answer"},e))))}renderSingleQuestion(){const e=this.props.paperDetail.paper.faqs.get(0);if(!e)return null;const t=Me.a.getString("paperDetail.paperFAQs.sectionTitle");return w.a.createElement(Qt.a,{section:"paper-faqs",title:t,className:"paper-detail page-section--left"},w.a.createElement("div",{className:"paper-faqs__question"},e.question),w.a.createElement("ul",{className:"paper-faqs__answer-list"},e.answers.map((e,t)=>w.a.createElement("li",{key:t,className:"paper-faqs__answer"},e))))}renderManyQuestions(){const e=Me.a.getString("paperDetail.paperFAQs.sectionTitle");return w.a.createElement(Qt.a,{section:"paper-faqs",title:e,className:"paper-detail page-section--left"},this.props.paperDetail.paper.faqs.map((e,t)=>w.a.createElement(Xt,{key:e.id,defaultExpanded:0===t,header:w.a.createElement("div",{className:"paper-faqs__question"},e.question),body:w.a.createElement("ol",{className:"paper-faqs__answer-list"},e.answers.map((e,t)=>w.a.createElement("li",{key:t,className:"paper-faqs__answer"},e)))})))}render(){const{paper:e}=this.props.paperDetail;return this.context.weblabStore.isFeatureEnabled(k.b.PDPPaperFAQSCSOnly)&&!e.isFieldOfStudy(Zt.a.COMPUTER_SCIENCE)?null:!e.faqs||e.faqs.isEmpty()?null:w.a.createElement(He.c,{feature:k.b.PDPPaperFAQSNumericalOnly},w.a.createElement(He.b,null,this.renderQuantitativeResults()),w.a.createElement(He.a,null,1===e.faqs.size?this.renderSingleQuestion():this.renderManyQuestions()))}}function aa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}ea(ta,"propTypes",{paperDetail:O.a.instanceOf(et.f).isRequired}),ea(ta,"contextTypes",{weblabStore:O.a.instanceOf(rt.b).isRequired});class na extends P.PureComponent{renderFiguresSection(e,t,a){return w.a.createElement("div",null,w.a.createElement("h4",{className:"card-content-label"},a),w.a.createElement(Mt,{paperId:e.id,slug:e.slug,figures:t}))}renderCardContent(e,t,a,n,r){if(!e.isEmpty()||this.hasFAQs(a)||this.hasERMs(a)){const i=w.a.createElement(w.a.Fragment,null,e.isEmpty()?null:this.renderFiguresSection(n,e,r),w.a.createElement(He.c,{feature:k.b.PDPPaperFAQS},w.a.createElement(He.b,null,w.a.createElement(ta,{paperDetail:a}))),w.a.createElement(He.c,{feature:k.b.PDPEntityRelations},w.a.createElement(He.b,null,t.isEmpty()||a.paper.entityRelations.isEmpty()?null:w.a.createElement(Qt.a,{section:"paper-entity-mentions",className:"paper-detail page-section--left",title:w.a.createElement(w.a.Fragment,null,Me.a.getString("paperDetail.sectionTitles.mentionedConnections")," ",w.a.createElement(jt.a,{display:"tag"}))},a.paper.entityRelations.map((e,t)=>w.a.createElement("div",{key:"erm_".concat(t),className:"entity-mention"},w.a.createElement("span",{className:"entity-mention__mentioned-entity"},e.srcEntityName),w.a.createElement("span",{className:"entity-mention__mentioned-relationship"},Me.a.getString("entityMentions.subtypes.".concat(e.relationshipSubtype))||Me.a.getString("entityMentions.types.".concat(e.relationshipType.id))||e.relationshipType.id),w.a.createElement("span",{className:"entity-mention__mentioned-entity"},e.destEntityName)))))));return t.isEmpty()?w.a.createElement(ae,null,i):w.a.createElement(ae,{willChildrenOwnLayout:!0},w.a.createElement(re,null,i),w.a.createElement(ne,null,w.a.createElement(se,null,w.a.createElement("h4",{className:"card-sidebar__title"},Me.a.getString("paperDetail.cardLabels.extractedContentFooter")),w.a.createElement(Yt,{paperDetail:a,desktopColumns:1}))))}return null}renderCardFooter(e,t){return e.isEmpty()?null:w.a.createElement(ie,null,w.a.createElement("h4",{className:"card-footer__title"},Me.a.getString("paperDetail.cardLabels.extractedContentFooter")),w.a.createElement(Yt,{paperDetail:t}))}hasFAQs(e){return this.context.weblabStore.isFeatureEnabled(k.b.PDPPaperFAQS)&&e.paper.faqs.find(e=>1===e.questionId)}hasERMs(e){var t;return this.context.weblabStore.isFeatureEnabled(k.b.PDPEntityRelations)&&!!(null!=(t=e)&&null!=(t=t.paper)&&null!=(t=t.entityRelations)?t.size:t)>0}hasFigures(e){return e.some(e=>"figure"===e.figureType)}hasTables(e){return e.some(e=>"table"===e.figureType)}hasValidEntities(e){return!e.entities.isEmpty()&&(e.fieldsOfStudy.includes(Zt.a.MEDICINE.name)||e.fieldsOfStudy.includes(Zt.a.COMPUTER_SCIENCE.name))}render(){const{paperDetail:e,paperDetail:{figures:t,paper:a,paper:{entities:n}}}=this.props,r=this.hasValidEntities(a)?n:he.List(),i=[],s=[];this.hasFigures(t)&&(i.push(Me.a.getString("paperDetail.sectionSubtitles.figures")),s.push(Me.a.getString("paperDetail.sectionSubtitles.figures"))),this.hasTables(t)&&(i.push(Me.a.getString("paperDetail.sectionSubtitles.tables")),s.push(Me.a.getString("paperDetail.sectionSubtitles.tables"))),this.hasFAQs(e)&&i.push(Me.a.getString("paperDetail.sectionSubtitles.results")),r.isEmpty()||i.push(Me.a.getString("paperDetail.sectionSubtitles.topics"));const o=we.m(i),l=Me.a.getString("paperDetail.sectionSubtitles.extractedContent",o);if(!t.isEmpty()||!r.isEmpty()||this.hasFAQs(e)){const n=we.m(s),i=this.renderCardContent(t,r,e,a,n);return w.a.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:Me.a.getString("paperDetail.tabLabels.extractedContent")},w.a.createElement($,{cardId:na.CARD_ID,navLabel:o},w.a.createElement(te,{title:l}),i||this.renderCardFooter(r,e)))}return null}}aa(na,"propTypes",{paperDetail:O.a.instanceOf(et.f).isRequired}),aa(na,"contextTypes",{weblabStore:O.a.instanceOf(rt.b).isRequired}),aa(na,"CARD_ID","extracted");var ra=a(784),ia=a(803),sa=a(728),oa=a(842);a(75);function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ca(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function pa(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ua extends P.PureComponent{constructor(){super(...arguments),pa(this,"onClickPaperLink",(e,t)=>{if(e.linkType===Fe.a.WILEY||e.linkType===Fe.a.DOI){const a=oa.a(e.url);t.preventDefault(),window.open(a,"_blank")}}),pa(this,"prepareAlternateLinkGroups",e=>oa.g(e,5));const{authStore:e}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(a),!0).forEach((function(t){pa(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ca(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.getStateFromAuthStore()),e.registerComponent(this,()=>{this.setState(this.getStateFromAuthStore())})}getStateFromAuthStore(){return{isLoggedIn:this.context.authStore.hasAuthenticatedUser()}}componentDidMount(){this.trackAlternatesImpression()}componentDidUpdate(e){const{paper:t}=this.props;t.id!==e.paper.id&&this.trackAlternatesImpression()}trackAlternatesImpression(){const{paper:e,showPrimaryOnly:t}=this.props;if(e.primaryPaperLink&&!t&&!e.alternatePaperLinks.isEmpty()){const t=e.alternatePaperLinks.filter(e=>e.linkType===Fe.a.OPEN_ACCESS),a=t.size>0,n=e.alternatePaperLinks.size-t.size>0;Object(Te.a)($t.a.create(Pe.a.PaperDetail.ALTERNATE_PAPER_LINKS,{paperId:e.id,hasUnpaywallAlts:a,hasFoundAlts:n}))}}getAlternates(){const{isLoggedIn:e}=this.state,{paper:t,showPrimaryOnly:a}=this.props;if(a||t.alternatePaperLinks.isEmpty())return null;const n=this.prepareAlternateLinkGroups(t.alternatePaperLinks),r=n.openAccess.isEmpty()&&n.pdf.isEmpty()&&n.nonPdf.isEmpty(),i={id:ve.a,"paper-id":this.props.paper.id,"has-open-links":!n.pdf.isEmpty(),"has-open-nonpdf":!n.nonPdf.isEmpty(),"has-unpaywall":!n.openAccess.isEmpty(),"has-institutional":void 0!==n.institutional,"num-alternates":n.pdf.size+n.nonPdf.size+n.openAccess.size};if(r)return this.context.weblabStore.isFeatureEnabled(k.b.OpenAthensRedirect)?P.createElement(qt.a,Object(ye.a)(i),P.createElement(da,{link:n.institutional,paperId:t.id,isPrimary:!1,iconButtonClassName:"button--secondary"})):null;const s=n.openAccess.isEmpty()?null:P.createElement("ul",{className:"unpaywall-links"},n.openAccess.map(e=>P.createElement("li",{key:e.url,className:"unpaywall"},P.createElement(da,{link:e,paperId:t.id,isPrimary:!1})))),o=n.pdf.isEmpty()?null:P.createElement("ul",{className:"pdf-links"},n.pdf.map(e=>P.createElement("li",{key:e.url,className:"pdf"},P.createElement(da,{link:e,paperId:t.id,isPrimary:!1})))),l=n.nonPdf.isEmpty()?null:P.createElement("ul",{className:"out-links"},n.nonPdf.map(e=>P.createElement("li",{key:e.url,className:"link-out"},P.createElement(da,{link:e,paperId:t.id,isPrimary:!1})))),p=n.institutional?P.createElement(He.c,{feature:k.b.OpenAthensRedirect},P.createElement(He.b,null,P.createElement("ul",{className:"institutional-link"},P.createElement("li",{key:n.institutional.url,className:"institutional"},P.createElement(da,{link:n.institutional,paperId:t.id,isPrimary:!1}))))):null,d=P.createElement("div",null,s,p,o,l),h=e&&n.institutional;return P.createElement("div",{className:"alternate-sources-dropdown-institutional-banner-wrapper"},P.createElement(qt.a,{className:"alternate-sources-dropdown"},P.createElement(ia.a,{className:"button--secondary button--full-width icon-button",seleniumSelector:"alt-paper-links",content:d},P.createElement("span",la({className:"flex-row-centered"},Object(ye.a)(i)),P.createElement(c.a,{width:"15",height:"15",icon:oa.b(n)}),P.createElement("span",{className:"alternate-sources-dropdown-text"},oa.c(n)),P.createElement(c.a,{width:"12",height:"12",icon:"disclosure",className:"icon-down"})))),P.createElement(He.c,{feature:k.b.OpenAthensRedirect},P.createElement(He.b,null,h?P.createElement("div",{className:"institutional-banner"},P.createElement("span",{className:"banner-new-label"},Object(u.b)(e=>e.paper.institutionalAccessBanner.new)),Object(u.b)(e=>e.paper.institutionalAccessBanner.institutionalAccess)):null)))}render(){const{id:e,primaryPaperLink:t}=this.props.paper;return P.createElement(Ft.a,{className:"flex-paper-actions",wrap:!1},t&&P.createElement(qt.a,null,P.createElement(da,{link:t,paperId:e,isPrimary:!0,onClick:this.onClickPaperLink.bind(this,t)})),this.getAlternates())}}function da(e){let{link:t,paperId:a,isPrimary:n,onClick:r,iconButtonClassName:i}=e;const s=oa.f(t.url),o=t.linkType===Fe.a.OPEN_ACCESS,l=t.linkType===Fe.a.INSTITUTIONAL_ACCESS,c=o?"open-access":s?"fa-pdf":l?"openathens-login":"fa-link-out",p=n||l?oa.e(t):oa.d(t);return P.createElement(ye.b,{heapProps:{id:ve.t,"link-type":t.linkType,"direct-pdf-link":s,"unpaywall-link":o,institutional:l,"primary-link":n,"paper-id":a}},P.createElement(sa.a,{tagName:"a",link:t,onClick:r,className:q()({"button--full-width":!0,"button--primary":n,"button--unpaywall":o,"button--institutional":l},i),iconProps:{icon:c,width:"15",height:"15"},seleniumSelector:"paper-link",text:p,target:"_blank",rel:"noopener",title:t.url,href:t.url}))}pa(ua,"contextTypes",{authStore:O.a.instanceOf(p.a).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});var ha=a(983),ma=a(1035),ba=a(734),fa=a(774),ga=a(109),Ea=a(156),ya=a(65),_a=a(108);function va(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Oa extends P.PureComponent{constructor(e,t){super(e,t),this.showCiteModal=this.showCiteModal.bind(this)}showCiteModal(){Object(Te.a)(Oe.a.create(Pe.a.PaperDetail.Header.Action.CITE)),this.context.dispatcher.dispatch(Object(E.b)({id:f.b.CITE,data:this.props.paper}))}render(){var e;const{paper:t,trackActionClick:a}=this.props,r=!!(null!=(e=this.context.userPrefsStore.getLocalPreference(ya.a.FEED_LINK_AD_DISMISSED))?e.pdp:e);return w.a.createElement(Ft.a,{wrap:!0,className:"flex-paper-actions-group alternate-sources"},w.a.createElement(qt.a,null,w.a.createElement(He.c,{feature:k.b.AlternateSources},w.a.createElement(He.b,null,w.a.createElement(ua,{paper:t})),w.a.createElement(He.a,null,w.a.createElement(ua,{paper:t,showPrimaryOnly:!0})))),w.a.createElement(ba.a,null,w.a.createElement(qt.a,null,w.a.createElement(Ft.a,{wrap:!1,className:"flex-paper-actions small-links"},w.a.createElement(qt.a,{className:"shrinkable"},w.a.createElement(ye.b,{heapProps:{id:ve.x}},w.a.createElement(n.b,{buttonText:Object(u.b)(e=>e.paper.action.save),className:"button--tertiary",paper:t,trackLibraryClick:a}))),w.a.createElement(qt.a,{className:"shrinkable"},w.a.createElement(ye.b,{heapProps:{id:ve.v}},w.a.createElement(ra.a,{className:"button--tertiary",queryType:ga.c.PAPER_CITATION,queryValue:t.id,displayValue:t.title.text,subLocation:b.f.pdpAlert}))),w.a.createElement(qt.a,{className:"shrinkable"},w.a.createElement(ye.b,{heapProps:{id:ve.w}},w.a.createElement(ha.a,{className:"button--tertiary",paper:t,onClick:this.showCiteModal}))),w.a.createElement(Pa,{isMobile:!1,hasFeedAdCookie:r,paper:t})))),w.a.createElement(fa.a,null,w.a.createElement(Pa,{isMobile:!0,hasFeedAdCookie:r,paper:t})))}}va(Oa,"propTypes",{paper:O.a.object.isRequired,trackActionClick:O.a.func.isRequired,isPdp:O.a.bool}),va(Oa,"contextTypes",{alertsStore:O.a.instanceOf(Ea.a).isRequired,dispatcher:O.a.instanceOf(_a.Dispatcher).isRequired,userPrefsStore:O.a.instanceOf(ya.b).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});const Pa=e=>{let{isMobile:t,hasFeedAdCookie:a,paper:n}=e;return w.a.createElement(qt.a,{className:"shrinkable"},w.a.createElement(ye.b,{heapProps:{id:ve.q}},w.a.createElement(ma.a,{paper:n,isPdp:!0,className:q()({"feed-link__button--highlight":!a,"feed-link__button--mobile":t})})))};var wa=a(935),Sa=a(928),Ta=a(929),Ca=a(5);let xa=!1;class ka extends P.Component{shouldComponentUpdate(){return!0}render(){const{dispatcher:e}=this.context;return e&&Object(Ca.a)()?e.dispatchEventually({actionType:L.a.actions.PAPER_NAV_DOM_DIRTY,viewportRect:wt.a.fromDOM(document)}):xa||(xa=!0,m.a.warn("<PaperNavRenderTrigger/> was unable to dispatch PAPER_NAV_DOM_DIRTY because dispatcher is missing")),null}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(ka,"contextTypes",{dispatcher:O.a.instanceOf(y.a)});var Na=a(40),Da=a(74);function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ia(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Aa=[3,6,12];class La extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),this.state={isLoading:!0,displayPageNum:1,loadedPageNum:0,matchedContent:he.List(),contentTypesSeen:he.Set(),rows:[],hasMoreRows:!1},this.onClickShowMore=this.onClickShowMore.bind(this),this.onResizeThrottled=Object(vt.a)(this.onResize.bind(this),250,{tailing:!0})}componentDidMount(){window.addEventListener("resize",this.onResizeThrottled),this.context.dispatcher.dispatchEventually({actionType:L.a.actions.PAPER_NAV_TARGET_PENDING,navId:this.constructor.CARD_ID});const e=()=>{this.context.dispatcher.dispatchEventually({actionType:L.a.actions.PAPER_NAV_TARGET_COMPLETE,navId:this.constructor.CARD_ID})};this.fetchMoreMatchedContent().then(e,e)}componentWillUnmount(){window.removeEventListener("resize",this.onResizeThrottled)}updateDisplayedState(e,t){const{paperDetail:{featuredContent:a}}=this.props,n=e.filter(wa.a),{rows:r,hasMoreRows:i}=function(e){let{numRows:t,rows:a}=e;return{rows:a.slice(0,t),hasMoreRows:a.length>t}}({numRows:2*t,rows:Object(Ta.b)({maintainSorting:!0,columnSizes:Aa,items:n.map(e=>({item:e,size:Object(wa.c)(e,a.includes(e))}))})}),s=r.map(e=>e).reduce((e,t)=>e.concat(t),[]).length,o=he.Set(e.slice(0,s).map(Da.j)).subtract(this.state.contentTypesSeen);return o.forEach(e=>{Object(Te.a)($t.a.create(Pe.a.PaperDetail.EXTERNAL_CONTENT_IMPRESSION,{contentType:e}))}),Object(Na.e)(this,{isLoading:!1,matchedContent:e,rows:r,hasMoreRows:i,contentTypesSeen:this.state.contentTypesSeen.concat(o)})}fetchMoreMatchedContent(e){const{id:t}=this.props.paperDetail.paper,{loadedPageNum:a}=this.state;return t?Promise.resolve().then(()=>Object(Na.e)(this,{isLoading:!0,loadedPageNum:a+1})).then(()=>Object(Na.b)(10)).then(()=>this.context.api.fetchMatchedContentForPaper({paperId:t,pageSize:9,offset:9*a})).then(t=>{var a;const n=he.List((null!=(a=t)&&null!=(a=a.resultData)?a.content:a)||[]).filter(Da.h).map(Da.i),r=e?e.concat(this.state.matchedContent).concat(n):this.state.matchedContent.concat(n);return this.updateDisplayedState(r,this.state.displayPageNum).then(()=>n.size>=9&&!Ra(this.state))}).then(e=>e?this.fetchMoreMatchedContent():Promise.resolve()).catch(e=>(m.a.error(e),Object(Na.e)(this,{isLoading:!1}))):Promise.resolve()}onClickShowMore(){this.setState({displayPageNum:this.state.displayPageNum+1},()=>{this.state.isLoading||Ra(this.state)||this.fetchMoreMatchedContent()})}onResize(){const{matchedContent:e,displayPageNum:t}=this.state;this.updateDisplayedState(e,t)}render(){const{isLoading:e,displayPageNum:t,rows:a,hasMoreRows:n}=this.state;return 0===a.length||0===a[0].length?null:P.createElement(i.a,{heapProps:{"relevance-bucket":"matched"}},P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:Object(u.b)(e=>e.paperDetail.tabLabels.matchedContent)},P.createElement($,{cardId:La.CARD_ID,navLabel:Object(u.b)(e=>e.paperDetail.sectionTitles.matchedContent.paperMentions),dataSeleniumSelector:"matched-content"},P.createElement(te,{title:Object(u.b)(e=>e.paperDetail.sectionTitles.matchedContent.paperMentions)}),P.createElement(ae,null,P.createElement("div",{className:"matched-content"},e&&P.createElement("div",{className:"matched-content__loading"},"Loading..."),P.createElement("div",{className:"matched-content__boxes"},P.createElement(Ta.c,null,a.map(e=>e.map(e=>{let{size:t,item:a}=e;return P.createElement(Sa.a,{key:a.uniqueId,colSpan:t},P.createElement(wa.b,{content:a}))})))),n&&P.createElement("div",{className:"matched-content__pagination"},P.createElement("button",ja({className:"matched-content__paginate-button button button--secondary"},Object(ye.a)({id:ve.s,"page-number":t}),{onClick:this.onClickShowMore,"data-selenium-selector":"matched-content__paginate-button"}),Object(u.b)(e=>e.paperDetail.matched.paginationButtonText)))),P.createElement(ka,null)))))}}function Ra(e){const{displayPageNum:t,matchedContent:a}=e;return 4*(t+1)*2<a.size}function Ma(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ia(La,"CARD_ID","matched"),Ia(La,"contextTypes",{api:O.a.instanceOf(ct.a).isRequired,dispatcher:O.a.instanceOf(_a.Dispatcher).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});class Fa extends P.PureComponent{render(){const{heading:e,subheading:t,linkTo:a,linkParams:n,linkQuery:r}=this.props,i=P.createElement(P.Fragment,null,P.createElement("div",{className:"featured-content__explore-container"},P.createElement("h5",{className:"featured-content__explore-heading"},e),P.createElement("div",{className:"featured-content__explore-subheading"},t)));return a?P.createElement(ge.a,{className:"featured-content__explore",to:a,params:n||{},query:r},i):P.createElement("div",{className:"featured-content__explore"},i)}}function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}Ma(Fa,"defaultProps",{heading:Object(u.b)(e=>e.paperDetail.featured.explore.heading),subheading:Object(u.b)(e=>e.paperDetail.featured.explore.subheading)}),Ma(Fa,"contextTypes",{iconStore:O.a.instanceOf(h.a).isRequired});const Ha=[3,6,12];class Ba extends P.PureComponent{constructor(){super(...arguments),this.state={shouldShowAllBoxes:!1,isReadyToRender:!1,filteredContent:he.List(),rows:[],exploreSize:0,contentTypesSeen:he.Set()},this.onClickShowMore=this.onClickShowMore.bind(this),this.onResizeThrottled=Object(vt.a)(this.onResize.bind(this),250,{tailing:!0})}updateDisplayedState(e,t){const{rows:a,exploreSize:n}=function(e){let{rows:t}=e;const a=t[0];let n=0;a&&(n=Ta.a-a.reduce((e,t)=>{let{size:a}=t;return e+a},0),9===n&&1===a.length?(a[0].size=6,n=6):6===n&&2===a.length?(a[0].size+=3,a[1].size+=3,n=0):3===n&&2===a.length&&(a[0].size>a[1].size?a[1].size+=3:a[0].size+=3,n=0));n<=2&&(n=0);return{exploreSize:n,rows:t}}({rows:Object(Ta.b)({maintainSorting:!1,columnSizes:Ha,items:e.map(e=>({item:e,size:Object(wa.c)(e,!0)}))})}),r=t?a.map(e=>e).reduce((e,t)=>e.concat(t),[]).length:a.length>0?a[0].length:0,i=he.Set(e.slice(0,r).map(e=>Object(Da.j)(e))).subtract(this.state.contentTypesSeen);return i.forEach(e=>{Object(Te.a)($t.a.create(Pe.a.PaperDetail.EXTERNAL_CONTENT_IMPRESSION,{contentType:e}))}),Object(Na.e)(this,{shouldShowAllBoxes:t,filteredContent:e,rows:a,exploreSize:n,isReadyToRender:!0,contentTypesSeen:this.state.contentTypesSeen.concat(i)})}componentDidMount(){window.addEventListener("resize",this.onResizeThrottled);const{paperDetail:{featuredContent:e}}=this.props,{shouldShowAllBoxes:t}=this.state;this.updateDisplayedState(e,t)}componentWillUnmount(){window.removeEventListener("resize",this.onResizeThrottled)}onClickShowMore(){const{filteredContent:e}=this.state;this.updateDisplayedState(e,!0)}onResize(){const{filteredContent:e,shouldShowAllBoxes:t}=this.state;this.updateDisplayedState(e,t)}renderHeader(e){return e.filter(e=>!(e instanceof Da.b)).isEmpty()?Object(u.b)(e=>e.paperDetail.featured.header.trialsOnly):e.filter(e=>!(e instanceof Da.c)).isEmpty()?Object(u.b)(e=>e.paperDetail.featured.header.codeOnly):e.filter(e=>!(e instanceof Da.e||e instanceof Da.f)).isEmpty()?Object(u.b)(e=>e.paperDetail.featured.header.slidesOnly):e.filter(e=>!(e instanceof Da.g)).isEmpty()?Object(_e.l)(e.size,Object(u.b)(e=>e.paperDetail.featured.header.videosOnly.singular),Object(u.b)(e=>e.paperDetail.featured.header.videosOnly.plural),!0):Object(u.b)(e=>e.paperDetail.featured.header.default)}render(){const{paperDetail:e}=this.props,{shouldShowAllBoxes:t,isReadyToRender:a,filteredContent:n,rows:r,exploreSize:s}=this.state;if(!a)return null;if(n.isEmpty())return null;const o=r[0];if(!o)return null;const l=n.size-o.length,c=r.length>1&&!t,p=e.paper.entities.get(0)||null;return P.createElement(i.a,{heapProps:{"relevance-bucket":"featured"}},P.createElement(M,{id:this.constructor.NAV_ID,navLabel:this.renderHeader(n),className:q()({"featured-content":!0,"featured-content__no-pagination":!c}),"data-selenium-selector":"featured-content"},P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:this.renderHeader(n)},P.createElement("div",{className:"featured-content__header"},P.createElement("h4",{className:"featured-content__header-text text--lg"},this.renderHeader(n)))),P.createElement(Ta.c,null,t?r.map((e,t)=>e.map((e,a)=>{let{size:n,item:r}=e;return P.createElement(Sa.a,{key:[r.uniqueId,t,a].join(","),colSpan:n},P.createElement(wa.b,{content:r}))})):o.map((e,t)=>{let{size:a,item:n}=e;return P.createElement(Sa.a,{key:[n.uniqueId,t].join(","),colSpan:a},P.createElement(wa.b,{content:n}))}),s>0&&p?P.createElement(Sa.a,{key:"explore",colSpan:s},P.createElement(Fa,{linkTo:"ENTITY",linkParams:{entityId:p.id,slug:p.slug}})):null),c&&P.createElement("div",{className:"featured-content__pagination"},P.createElement("button",qa({className:"featured-content__paginate-button button button--secondary"},Object(ye.a)({id:ve.l}),{onClick:this.onClickShowMore,"data-selenium-selector":"featured-content__paginate-button"}),Object(u.b)(e=>e.paperDetail.featured.paginationButtonText,l))),P.createElement(ka,null)))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Ba,"NAV_ID","featured-content");a(240);function za(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Va(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ua extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),Va(this,"handleHover",()=>{const e=je.a.create(Pe.a.PaperDetail.Abstract.KEY_RESULT_HOVER,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?za(Object(a),!0).forEach((function(t){Va(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):za(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.context.heapPropsChain,{paperId:this.props.paperDetail.paper.paperId}));Object(Te.a)(e)}),Va(this,"truncateContent",e=>{const t=e.trim().split(" "),a=Object(u.b)(e=>e.paperDetail.abstract.highlight.paragraphEllipsis);return a+t.slice(0,49).join(" ")+a}),Va(this,"getPDFLink",()=>{const{relatedPages:e,paperDetail:t}=this.props,a=t.paper.primaryPaperLink;if(a&&oa.f(a.url)&&e&&e.length>0){const t=a.url;return"".concat(t,"#page=").concat(e[0])}return null})}renderPreviewBox(){const{content:e}=this.props,t=this.getPDFLink();return P.createElement("div",{className:"entity-preview-box abstract-result__paragraph-preview","data-selenium-selector":"entity-preview-box"},P.createElement("div",{className:"entity-preview-box-hover-text abstract-result__related-paragraph__box"},P.createElement("div",{className:"abstract-result__related-paragraph__title"},Object(u.b)(e=>e.paperDetail.abstract.highlight.paragraphLabel)),P.createElement("div",{className:"abstract-result__related-paragraph__text"},this.truncateContent(e)),t&&P.createElement(Re.a,{"data-heap-id":"paper-abstract-highlight-related-pdf-link-click",href:t,className:"abstract-result__related-paragraph__pdf-link"},P.createElement("div",{className:"abstract-result__related-paragraph__pdf-link__text"},Object(u.b)(e=>e.paperDetail.abstract.highlight.pdfLinkLabel),P.createElement(c.a,{icon:"arrow-lite",className:"abstract-result__related-paragraph__pdf-link__arrow",height:"12",width:"12"})))))}render(){return P.createElement(zt,{previewBox:this.renderPreviewBox(),onShow:this.handleHover,children:this.props.previewTarget})}}const Wa=Object.freeze({RESULT:"result_label",METHOD:"method_label"});function Ga(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Ka=he.Map({[Wa.RESULT]:"key-result__highlight",[Wa.METHOD]:"key-method__highlight"});class Ya extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),Ga(this,"getKeyFlag",e=>{const{isTruncated:t}=this.props;return t?e[0].label===Wa.METHOD?Object(u.b)(e=>e.paperDetail.abstract.highlight.keyMethodSingle):Object(u.b)(e=>e.paperDetail.abstract.highlight.keyResultSingle):null}),this.state={isTruncated:this.props.isTruncated}}componentDidUpdate(e){e.isTruncated!==this.props.isTruncated&&this.updateTruncatedState()}updateTruncatedState(){this.setState({isTruncated:this.props.isTruncated})}renderHighlightedAbstract(e){const{paperDetail:t,offset:a,skipperAbstractData:n,sentenceTypes:r}=this.props;let i=0,s=[];const o=n.sentences.filter(e=>e.label&&r.has(e.label));for(let n=0;n<o.length;++n){const r=o[n],l=r.startIndex-a;let c=r.endIndex-a;if(0==n&&c>e.length&&(c=e.length),0!=l&&(s.push(e.slice(i,l)),l>e.length))return s;if(!(l<e.length&&c<=e.length))return s;{const a=this.getKeyFlag(o);0==n&&a&&s.push(P.createElement("span",{className:"paper-detail__abstract__highlighted__key-highlight",key:n},a));const p=P.createElement("mark",{className:Ka.get(r.label),key:n+.5},e.slice(l,c));s.push(r.paragraph?P.createElement(Ua,{key:n+.75,relatedPages:r.relatedPages,paperDetail:t,content:r.paragraph,previewTarget:p}):p),i=c}}return i<e.length&&s.push(e.slice(i,e.length)),s}renderToggle(){const{isTruncated:e}=this.state,{withEllipsis:t,isBeginningTruncated:a}=this.props,n=e||a?"more":"less",r=q()("text-truncator__abstract__toggle",n),i=e?this.props.extendActionText:this.props.truncateActionText,s=e?this.props.extendAriaLabel:this.props.truncateAriaLabel,o="more"===n?"square-plus":"square-minus",l=P.createElement("a",{className:r,tabIndex:"0",role:"button","aria-label":s,onClick:this.props.onClick,"data-selenium-selector":"text-truncator-toggle"},P.createElement("span",{className:"paper-detail__abstract__toggle__label"},(t||!e||!a)&&i&&P.createElement(c.a,{className:"paper-detail__abstract__toggle__icon",icon:o,height:"12",width:"12"}),i));return t||!e?l:P.createElement("span",null," [",l,"] ")}render(){const{limit:e,text:t,withEllipsis:a}=this.props,n=a?_e.p(t,e):_e.p(t,e,!1),r=this.renderHighlightedAbstract(this.state.isTruncated?n:t),i=q()("text-truncator","abstract__text text--preline");return P.createElement("span",{className:i},r,this.renderToggle())}}function Qa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ja(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Ga(Ya,"defaultProps",{limit:360,isTruncated:!0,isBeginningTruncated:!1,extendActionText:Object(u.b)(e=>e.textTruncator.default.extendLabel),extendAriaLabel:Object(u.b)(e=>e.textTruncator.default.extendAriaLabel),truncateActionText:Object(u.b)(e=>e.textTruncator.default.truncateLabel),truncateAriaLabel:Object(u.b)(e=>e.textTruncator.default.truncateAriaLabel),withEllipsis:!0,offset:0,sentenceTypes:new Set});class Xa extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),Ja(this,"trackAbstractHighlightEvent",e=>{const t=Oe.a.create(e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(a),!0).forEach((function(t){Ja(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.context.heapPropsChain,{paperId:this.props.paperDetail.paper.id}));Object(Te.a)(t)}),Ja(this,"openFullAbstract",()=>{let{isBeginningTruncated:e}=this.state;this.setState(t=>((e&&t.isTruncated||!e&&!t.isTruncated)&&(e=!e),{isTruncated:!t.isTruncated,isBeginningTruncated:e}))}),Ja(this,"onToggleClick",()=>{this.openFullAbstract(),this.state.isTruncated?this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.TOGGLE_CLOSE):this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.TOGGLE_OPEN)}),Ja(this,"onBeginningToggleClick",()=>{this.setState(e=>({isBeginningTruncated:!e.isBeginningTruncated}),()=>this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.TOGGLE_BEGINNING))}),Ja(this,"onClickMethods",()=>{const{isMethodsHighlighted:e,sentenceTypes:t,isTruncated:a}=this.state;a&&this.openFullAbstract(),e?t.delete(Wa.METHOD):t.add(Wa.METHOD),this.setState({isMethodsHighlighted:!e,sentenceTypes:new Set(t)},()=>{this.state.isMethodsHighlighted?this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_METHODS_ON):this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_METHODS_OFF)})}),Ja(this,"onClickResults",()=>{const{isResultsHighlighted:e,sentenceTypes:t,isTruncated:a}=this.state;a&&this.openFullAbstract(),e?t.delete(Wa.RESULT):t.add(Wa.RESULT),this.setState({isResultsHighlighted:!e,sentenceTypes:new Set(t)},()=>{this.state.isResultsHighlighted?this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_RESULTS_ON):this.trackAbstractHighlightEvent(Pe.a.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_RESULTS_OFF)})}),Ja(this,"renderHighlightToggle",e=>{const{isMethodsHighlighted:t,isResultsHighlighted:a}=this.state,n=e.find(e=>e.label===Wa.METHOD),r=e.find(e=>e.label===Wa.RESULT);return P.createElement("div",{className:"paper-detail__abstract__highlight__toggle"},P.createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons__label"},P.createElement(c.a,{icon:"highlighter",width:"14",height:"14",className:"paper-detail__abstract__highlight__toggle__buttons__label__icon"}),P.createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons__label__text"},Object(u.b)(e=>e.paperDetail.abstract.highlight.highlightToggleLabel))),P.createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons"},n&&P.createElement(It.default,{className:q()({abstract__highlight__toggle__button:!0,abstract__highlight__toggle__button__method__on:t}),label:Object(u.b)(e=>e.paperDetail.abstract.highlight.methodsToggleLabel),onClick:this.onClickMethods}),r&&P.createElement(It.default,{className:q()({abstract__highlight__toggle__button:!0,abstract__highlight__toggle__button__result__on:a}),label:Object(u.b)(e=>e.paperDetail.abstract.highlight.resultsToggleLabel),onClick:this.onClickResults})))});const{paperDetail:r}=this.props,i=r.skipperExperiments.dataFor("paper-abstract-highlight-v2"),s=i.sentences.find(e=>e.label===Wa.RESULT||e.label===Wa.METHOD),o=s&&s.label;this.state={skipperAbstractData:i,isTruncated:!0,isBeginningTruncated:!0,sentenceTypes:new Set([o]),isResultsHighlighted:o===Wa.RESULT,isMethodsHighlighted:o===Wa.METHOD}}render(){const{skipperAbstractData:e,isTruncated:t,isBeginningTruncated:a,sentenceTypes:n}=this.state,{isMobile:r,paperDetail:i,defaultToggleOn:s}=this.props,o=e.sentences.find(e=>e.label&&n.has(e.label)),l=o?o.startIndex:0,c=!(!l||0==l),p=e.firstSentenceEndIndex,d=r?200:500,h=c?d-p:d;return P.createElement("div",{className:"fresh-paper-detail-page__abstract","data-selenium-selector":"abstract-text"},P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:"Abstract"}),(s||!t)&&this.renderHighlightToggle(e.sentences),P.createElement("div",{className:"paper-detail__abstract__highlighted"},c&&P.createElement(Ya,{disableClickStyle:!0,onClick:this.onBeginningToggleClick,isTruncated:a,isBeginningTruncated:a,skipperAbstractData:e,text:e.abstract.substring(0,l),limit:p,extendActionText:Object(u.b)(e=>e.paperDetail.abstract.highlight.beginningToggle),truncateActionText:Object(u.b)(e=>e.paperDetail.abstract.highlight.noToggleExpansion),withEllipsis:!1,paperDetail:i}),P.createElement(Ya,{isTruncated:t,isBeginningTruncated:a,onClick:this.onToggleClick,skipperAbstractData:e,text:e.abstract.substring(l,e.abstract.length),limit:h,offset:l,extendActionText:Object(u.b)(e=>e.paperDetail.abstract.highlight.toggleExpand),truncateActionText:Object(u.b)(e=>e.paperDetail.abstract.highlight.toggleCollapse),paperDetail:i,sentenceTypes:n})))}}class $a extends P.PureComponent{handleClick(e,t){const a=this.props.onClick;"function"==typeof a&&a(e,t,this.props.paper.id)}renderAuthorsListItem(){const{authors:e}=this.props.paper;return e.isEmpty()?null:P.createElement(ue.a,{authors:e,onAuthorClick:e=>{this.handleClick("AUTHOR",e)},max:this.props.maxAuthors,shouldLinkToAHP:!this.props.disableAuthorLinks})}render(){return P.createElement("span",{className:"paper-meta","data-selenium-selector":"paper-meta-subhead"},this.renderAuthorsListItem())}}function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function en(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}($a,"contextTypes",{weblabStore:O.a.instanceOf(rt.b).isRequired});class tn extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),this.onClick=this.onClick.bind(this)}onClick(e){e.preventDefault();const{navId:t,query:a}=this.props,n=document.querySelector("#".concat(t));if(!n)return void m.a.warn('Could not find navId "'.concat(t,'" in the dom'));const{offsetTop:r}=n;if(r>=0){const e=r-100;Ot.a.hasNativeSmoothScrollSupport()?window.scrollTo({top:e,behavior:"smooth"}):window.scrollTo(0,e)}this.context.history.replace(Object(at.d)({path:"",query:a||{},hash:t}))}render(){const e=this.props,{navId:t,children:a,query:n}=e,r=en(e,["navId","children","query"]);return P.createElement("a",Za({},r,{href:"#".concat(t),onClick:this.onClick}),a)}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(tn,"contextTypes",{history:O.a.instanceOf(_.a).isRequired});var an=a(170);function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function rn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function sn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class on extends P.Component{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(a),!0).forEach((function(t){sn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):rn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({isAttached:!1,placeholderHeightPx:0,scrollLeftPx:0},this.getStateFromPaperNavStore()),this.context.paperNavStore.registerComponent(this,()=>{this.setState(this.getStateFromPaperNavStore())}),this.setNavRef=this.setNavRef.bind(this),this.setPlaceholderRef=this.setPlaceholderRef.bind(this),this.setScrollRef=this.setScrollRef.bind(this),this.onResize=Object(vt.a)(this.onViewportChange.bind(this),250,{trailing:!0}),this.onScroll=Object(vt.a)(this.onViewportChange.bind(this),100,{leading:!0,maxWait:100,trailing:!0})}getStateFromPaperNavStore(){const{paperNavStore:e}=this.context;return{isPending:e.isPending(),navItems:e.getSortedNavItems()}}componentDidMount(){Ot.a.listenForScroll(this.onScroll),window.addEventListener("resize",this.onResize),this.onViewportChange()}componentWillUnmount(){Ot.a.stopListeningForScroll(this.onScroll),window.removeEventListener("resize",this.onResize)}componentDidUpdate(){const e=this.navRef;if(e&&!this.state.isAttached){const t=e.clientHeight;t!==this.state.placeholderHeightPx&&this.setState({placeholderHeightPx:t})}}shouldComponentUpdate(e,t){if(this.state.isAttached!==t.isAttached||this.state.isPending!==t.isPending||this.state.placeholderHeightPx!==t.placeholderHeightPx||this.state.navItems.size!==t.navItems.size)return!0;for(let e=0;e<t.navItems.size;e++){const a=this.state.navItems.get(e),n=t.navItems.get(e);if(a.isActive!==n.isActive||a.isSolitary!==n.isSolitary||a.isProminent!==n.isProminent||a.isContained!==n.isContained||a.isVisible!==n.isVisible||a.id!==n.id||a.label!==n.label)return!0}return!1}shouldBeAttached(e){const t=this.placeholderRef;return t?t.offsetTop<=e.top+66:null}updateHorizontalScrollPos(){const e=this.scrollRef;if(!e)return;const t=this.state.navItems.filter(e=>e.isProminent).map(e=>e.id).map(t=>e.querySelector('[data-nav-id="'.concat(t,'"]'))).map(e=>e&&e.offsetLeft).first();"number"==typeof t&&(Ot.a.hasNativeSmoothScrollSupport()?e.scrollTo({left:t,behavior:"smooth"}):e.scrollLeft=t)}setNavRef(e){this.navRef=e}setPlaceholderRef(e){this.placeholderRef=e}setScrollRef(e){this.scrollRef=e}onViewportChange(){const e=wt.a.fromDOM(document);this.context.dispatcher.dispatchEventually({actionType:L.a.actions.PAPER_NAV_DOM_DIRTY,viewportRect:e});const t=this.shouldBeAttached(e);null!==t&&t!==this.state.isAttached?this.setState({isAttached:t},()=>{t&&this.updateHorizontalScrollPos()}):this.state.isAttached&&this.updateHorizontalScrollPos()}render(){const{navItems:e,isAttached:t,isPending:a,placeholderHeightPx:n}=this.state;return e.isEmpty()?null:P.createElement("div",{className:q()({"paper-nav":!0,"paper-nav__is-attached":t,"paper-nav__is-mobile":this.context.envInfo.isMobile,"paper-nav__is-pending":a})},P.createElement("div",{className:"paper-nav__placeholder",ref:this.setPlaceholderRef,style:{minHeight:"".concat(n,"px")}},P.createElement("nav",{className:"paper-nav__nav",ref:this.setNavRef},P.createElement("div",{className:"paper-nav__scrollable",ref:this.setScrollRef},P.createElement("ul",{className:"paper-nav__nav-list"},e.map(e=>P.createElement("li",{key:e.id,className:q()({"paper-nav__nav-item":!0,"paper-nav__is-active":e.isActive,"paper-nav__is-solitary":e.isSolitary,"paper-nav__is-prominent":e.isProminent,"paper-nav__is-contained":e.isContained,"paper-nav__is-visible":e.isVisible})},P.createElement(tn,nn({navId:e.id,className:"paper-nav__nav-link"},Object(ye.a)({id:ve.u,nav:e.id})),P.createElement("span",{className:"paper-nav__nav-label"},e.label)))))))))}}function ln(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}sn(on,"contextTypes",{dispatcher:O.a.instanceOf(y.a).isRequired,envInfo:O.a.instanceOf(A.a).isRequired,paperNavStore:O.a.instanceOf(an.a).isRequired});class cn extends P.PureComponent{static getTabLabel(e){var t;const a=(null!=(t=e)&&null!=(t=t.paperDetail)&&null!=(t=t.citedPapers)?t.totalCitations:t)||0;return Object(u.b)(e=>e.paperDetail.tabLabels.referencedPapers,a.toLocaleString())}static hasContent(e){var t;return((null!=(t=e)&&null!=(t=t.paperDetail)&&null!=(t=t.citedPapers)?t.totalCitations:t)||0)>0}render(){const{isMobile:e}=this.context.envInfo,{paper:t,paper:{citationStats:{numViewableReferences:a,numKeyReferences:n}},citedPapers:r,skipperExperiments:i}=this.props.paperDetail,s=this.constructor.getTabLabel(this.props),o=i.memberOf(tt.b.RerankedCitations.KEY);return e&&this.context.weblabStore.isFeatureEnabled(k.b.PDPCitationIntents)?P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:Object(u.b)(e=>e.paperDetail.sectionTitles.referencedPapers)},P.createElement($,{cardId:cn.CARD_ID,navLabel:s,className:"references"},P.createElement(te,{title:Object(u.b)(e=>e.paperDetail.sectionTitles.referencedPapers),subtitle:Object(u.b)(e=>e.paperDetail.sectionSubtitles.referencedPapers)}),P.createElement(ae,{willChildrenOwnLayout:!0},P.createElement(re,null,P.createElement(dt,{allowRelevanceSort:o,name:"citedPapers",paper:t,citationPage:r,citationTotal:a,keyTotal:n})),P.createElement(ne,null,P.createElement("div",{className:"card-callout__flush-top card-callout__mobile"},P.createElement("div",{className:"paper-detail__card__filter-block"},P.createElement(ft,null,P.createElement(lt,{allowRelevanceSort:o,paper:t,citationPage:r,sort:r.sort,totalPages:r.totalPages,citationType:r.citationType,useButtons:!0,showSummary:!1})))))))):P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:Object(u.b)(e=>e.paperDetail.sectionTitles.referencedPapers)},P.createElement($,{cardId:cn.CARD_ID,navLabel:s,className:"references"},P.createElement(te,{title:Object(u.b)(e=>e.paperDetail.sectionTitles.referencedPapers),subtitle:Object(u.b)(e=>e.paperDetail.sectionSubtitles.referencedPapers)}),P.createElement(ae,null,P.createElement(dt,{allowRelevanceSort:o,name:"citedPapers",paper:t,citationPage:r,citationTotal:a,keyTotal:n}))))}}ln(cn,"CARD_ID","references"),ln(cn,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});var pn=a(741),un=a(764),dn=a(754);function hn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function mn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bn extends P.PureComponent{constructor(){super(...arguments),this.onClick=this.onClick.bind(this)}onClick(){const{onClick:e}=this.props;e&&e()}renderChildren(){const{icon:e,headline:t,description:a,callToAction:n}=this.props;return P.createElement(P.Fragment,null,e&&P.createElement("div",{className:"scorecard__icon"},e),P.createElement("div",{className:"scorecard__body"},t&&P.createElement("div",{className:"scorecard__headline"},t),a&&P.createElement("div",{className:"scorecard__description"},a,n&&" ",n&&P.createElement("span",{className:"scorecard__call-to-action","data-selenium-selector":"scorecard-call-to-action"},n))))}render(){const{type:e,navId:t}=this.props,a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(a),!0).forEach((function(t){mn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):hn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({className:q()({scorecard__stat:!0,["scorecard__".concat(e)]:!0})},Object(ye.a)({id:ve.y,type:e}),{"data-selenium-selector":"scorecard-"+e,onClick:this.onClick});return t&&(a.navId=t),P.createElement(t?tn:"div",a,this.renderChildren())}}function fn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function gn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class En extends P.PureComponent{constructor(){super(...arguments),this.onClick=this.onClick.bind(this)}onClick(){const{onClick:e}=this.props;e&&e()}renderChildren(){const{headline:e,description:t,tooltip:a,background:n}=this.props;return P.createElement(P.Fragment,null,n&&P.createElement("div",{className:"scorecard__background"},n),P.createElement("div",{className:"scorecard_stat__body","data-selenium-selector":"scorecard-body"},e&&P.createElement("span",{className:"scorecard_stat__headline"},e),a&&P.createElement("div",{className:"scorecard_stat__tooltip"},a),t&&P.createElement("div",{className:"scorecard__description"},t)))}render(){const{type:e}=this.props,t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(a),!0).forEach((function(t){gn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({className:q()({scorecard__stat__v2:!0,["scorecard__".concat(e)]:!0})},Object(ye.a)({id:ve.y,type:e}),{"data-selenium-selector":"scorecard-"+e,onClick:this.onClick});return P.createElement("div",t,this.renderChildren())}}function yn(){return(yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}gn(En,"contextTypes",{weblabStore:O.a.instanceOf(rt.b).isRequired});class _n extends P.PureComponent{componentDidMount(){const{stat:{typeKey:e,citationIntentCount:t}}=this.props;Object(Te.a)($t.a.create(Pe.a.PaperDetail.SCORECARD_IMPRESSION,{scorecardType:e,methodIntentCount:t.methodology,backgroundIntentCount:t.background,resultIntentCount:t.result,hasMethodIntent:t.methodology>0,hasBackgroundIntent:t.background>0,hasResultIntent:t.result>0}))}renderHeadline(){const{stat:{citationIntentCount:e},paperDetail:{citingPapers:{totalCitations:t}}}=this.props;return P.createElement(tn,{navId:"citing-papers"},P.createElement("span",yn({className:"scorecard_stat__headline__dark"},Object(ye.a)({id:ve.g,key:"citation_headline","has-intents":Object.keys(e).length>0})),Object(u.b)(e=>e.paperDetail.scorecardV2.citedBy.headline,Object(_e.e)(t))))}renderDescription(){const{stat:e}=this.props;return P.createElement(P.Fragment,null,P.createElement("div",{className:"scorecard__description-line"},e.keyCitationCount>0&&P.createElement(tn,{navId:"citing-papers",query:{citingPapersSort:"is-influential"}},P.createElement("span",yn({className:"scorecard__description__highlight"},Object(ye.a)({id:ve.g,key:"is-influential","has-intents":!0})),P.createElement("span",{className:"scorecard__description__number"},e.keyCitationCount.toLocaleString()),Object(u.b)(e=>e.paperDetail.scorecardV2.highlyInfluential.description)))),Object.keys(e.citationIntentCount).map(t=>P.createElement("div",{className:"scorecard__description-line",key:t},P.createElement(tn,{navId:"citing-papers",query:{citationIntent:t}},P.createElement("span",Object(ye.a)({id:ve.g,key:t,"has-intents":!0}),P.createElement("span",{className:"scorecard__description__number"},e.citationIntentCount[t].toLocaleString()),Object(u.b)(e=>e.paperDetail.scorecardV2.citationIntent[t]))))))}render(){const{paperDetail:{citingPapers:{totalCitations:e}}}=this.props;return P.createElement(He.c,{feature:k.b.PDPScorecard},P.createElement(He.b,null,P.createElement(En,{type:"cited-by",headline:this.renderHeadline(),description:this.renderDescription(),tooltip:P.createElement(ge.a,{to:"FAQ",hash:"citation-intent"},P.createElement(c.a,{icon:"information"})),background:P.createElement(c.a,{icon:"scorecard-highly-influential"})})),P.createElement(He.a,null,P.createElement(bn,{type:"cited-by",icon:P.createElement(c.a,{icon:"scorecard-cited-by"}),navId:"citing-papers",headline:Object(u.b)(e=>e.paperDetail.scorecard.citedBy.headline),description:Object(u.b)(e=>e.paperDetail.scorecard.citedBy.description,Object(_e.e)(e)),callToAction:Object(u.b)(e=>e.paperDetail.scorecard.citedBy.callToAction)})))}}class vn extends P.PureComponent{componentDidMount(){const{stat:{typeKey:e}}=this.props;Object(Te.a)($t.a.create(Pe.a.PaperDetail.SCORECARD_IMPRESSION,{scorecardType:e}))}render(){const{stat:e}=this.props;return P.createElement(He.c,{feature:k.b.PDPScorecard},P.createElement(He.a,null,P.createElement(bn,{type:"highly-influential",icon:P.createElement(c.a,{icon:"scorecard-highly-influential"}),navId:"citing-papers",headline:Object(u.b)(e=>e.paperDetail.scorecard.highlyInfluential.headline),description:Object(u.b)(e=>e.paperDetail.scorecard.highlyInfluential.description,e.keyCitationCount.toLocaleString()),callToAction:Object(u.b)(e=>e.paperDetail.scorecard.highlyInfluential.callToAction)})))}}function On(e){let{retweetCount:t,favoriteCount:a}=e;return t+a>0?P.createElement("div",{className:"tweet__stats"},t>0&&P.createElement("span",{className:"tweet__stats__stat"},Object(_e.l)(t,Object(u.b)(e=>e.tweet.retweets.single),Object(u.b)(e=>e.tweet.retweets.plural))),a>0&&P.createElement("span",{className:"tweet__stats__stat"},Object(_e.l)(a,Object(u.b)(e=>e.tweet.favorites.single),Object(u.b)(e=>e.tweet.favorites.plural)))):null}var Pn=a(899);function wn(e){return"https://twitter.com/".concat(e)}const Sn=/#\w+/,Tn=/@\w+/;const Cn=he.Record({id:"",name:"",username:"",followers:0,image:""});Cn.fromJs=e=>Cn(e);var xn=Cn;function kn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Nn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Dn=he.Record({id:"",postedOn:0,body:"",user:xn(),retweetCount:0,favoriteCount:0});Dn.fromJs=e=>Dn(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(a),!0).forEach((function(t){Nn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{user:xn.fromJs(e.author)}));const jn=Dn;class In extends P.PureComponent{constructor(){super(...arguments),this.openTweet=this.openTweet.bind(this)}openTweet(e){const{currentTarget:t,target:a}=e;if(a instanceof HTMLElement&&(a===t||"A"!==a.nodeName)){e.stopPropagation();const{id:t,user:{username:a}}=this.props.tweet;window.open(function(e,t){return"https://twitter.com/".concat(e,"/status/").concat(t)}(a,t),"_blank")}}render(){const{postedOn:e,body:t,retweetCount:a,favoriteCount:n,user:{name:r,username:i,followers:s,image:o}}=this.props.tweet;return P.createElement("div",{className:"tweet flex-row flex-justify-start","data-selenium-selector":"tweet-list-item",onClick:this.openTweet},P.createElement(Re.a,{href:wn(i)},P.createElement("img",{className:"tweet__user-avatar flex-static",src:o})),P.createElement("div",null,P.createElement("div",{className:"tweet__user-info-container"},P.createElement("a",{className:"tweet__user-link",href:"https://twitter.com/".concat(i),target:"_blank",rel:"noopener noreferrer"},r),"·",P.createElement("span",{className:"tweet__user-info"},"@",i),"·",P.createElement("span",{className:"tweet__user-info"},Object(_e.l)(s,Object(u.b)(e=>e.tweet.followers.single),Object(u.b)(e=>e.tweet.followers.plural))),"·",P.createElement("span",{className:"tweet__user-info"},Nt.a.unix(e).utc().format("D MMM YYYY"))),P.createElement("p",{className:"tweet__text"},(l=t,he.List.of(l).flatMap(e=>e.split(/\s+/m)).map((e,t)=>{if(e.endsWith("…")||e.endsWith("..."))return e;let a=null;if(Pn.a.test(e)){const t=e.match(Pn.a);t&&(a=t[0])}else if(Sn.test(e)){const t=e.match(Sn);t&&(n=t[0].slice(1),a="https://twitter.com/hashtag/".concat(n))}else if(Tn.test(e)){const t=e.match(Tn);t&&(a=wn(t[0].slice(1)))}var n;return a?P.createElement(Re.a,{key:t,href:a},e):e}).interpose(" "))),P.createElement(On,{retweetCount:a,favoriteCount:n})));var l}}class An extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),this.state={tweets:he.List(),filteredTweets:he.List(),isLoading:!0,error:!1,offset:0},this.stopPropagation=this.stopPropagation.bind(this)}componentWillMount(){this.fetchTweets()}fetchTweets(){const e=this.props.paper.id;this.context.api.fetchTweetsByPaperId(e).then(e=>{let{resultData:t}=e;this.setState({tweets:he.List(t.tweets.map(jn.fromJs)),filteredTweets:he.List(t.filteredTweets.map(jn.fromJs)),isLoading:!1,error:!1})}).catch(()=>{this.setState({error:!0,isLoading:!1})})}stopPropagation(e){e.stopPropagation()}renderHeader(){const{onHideClick:e}=this.props;return P.createElement("div",{className:"tweet-modal__header flex-row flex-center flex-space-between"},P.createElement("h2",{className:"tweet-modal__title"},Object(u.b)(e=>e.paperDetail.scorecard.tweets.headline)),P.createElement(c.a,{className:"tweet-modal__close",icon:"x",width:"14",height:"14",onClick:e}))}renderError(){return P.createElement("div",{className:"tweet-modal__error flex-row-centered"},P.createElement(c.a,{className:"tweet-modal__error-icon",icon:"twitter",width:"36",height:"36"}),Object(u.b)(e=>e.paperDetail.scorecard.tweets.error))}renderTweetList(){const{tweets:e,filteredTweets:t,isLoading:a}=this.state,n=t.isEmpty()?e.take(1):t;return P.createElement("div",{className:"tweet-modal__tweet-list"},n.map(e=>P.createElement(In,{key:e.id,tweet:e})).push(a&&P.createElement("div",{key:"loading-indicator",className:"tweet-modal__loading-indicator flex-row-centered"},P.createElement(s.a,null))))}render(){const{error:e}=this.state,{onHideClick:t}=this.props;return P.createElement("div",{className:"modal-container dark-modal tweet-modal",onClick:t},P.createElement("div",{className:"modal",onClick:this.stopPropagation},this.renderHeader(),e?this.renderError():this.renderTweetList()))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(An,"contextTypes",{api:O.a.instanceOf(ct.a).isRequired});class Ln extends P.PureComponent{constructor(){super(...arguments),this.state={displayTwitterModal:!1},this.hideTweetsModal=this.hideTweetsModal.bind(this),this.showTweetsModal=this.showTweetsModal.bind(this)}componentDidMount(){const{stat:{typeKey:e}}=this.props;Object(Te.a)($t.a.create(Pe.a.PaperDetail.SCORECARD_IMPRESSION,{scorecardType:e}))}hideTweetsModal(){this.setState({displayTwitterModal:!1})}showTweetsModal(){this.setState({displayTwitterModal:!0})}render(){const{displayTwitterModal:e}=this.state,{stat:{tweetCount:t},paperDetail:{paper:a}}=this.props;return P.createElement(P.Fragment,null,P.createElement(He.c,{feature:k.b.PDPScorecard},P.createElement(He.b,null,P.createElement(En,{type:"tweet",headline:t.toLocaleString(),description:Object(_e.l)(t,Object(u.b)(e=>e.paperDetail.scorecardV2.tweets.description.single),Object(u.b)(e=>e.paperDetail.scorecardV2.tweets.description.plural),!0),onClick:this.showTweetsModal,background:P.createElement(c.a,{icon:"scorecard-tweet"})}),e&&P.createElement(An,{paper:a,onHideClick:this.hideTweetsModal})),P.createElement(He.a,null,P.createElement(bn,{type:"tweet",icon:P.createElement(c.a,{icon:"scorecard-tweet"}),headline:Object(u.b)(e=>e.paperDetail.scorecard.tweets.headline),description:Object(_e.l)(t,Object(u.b)(e=>e.paperDetail.scorecard.tweets.description.single,t.toLocaleString()),Object(u.b)(e=>e.paperDetail.scorecard.tweets.description.plural,t.toLocaleString()),!0),callToAction:Object(u.b)(e=>e.paperDetail.scorecard.tweets.callToAction),onClick:this.showTweetsModal}),e&&P.createElement(An,{paper:a,onHideClick:this.hideTweetsModal}))))}}var Rn=a(371);function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}class Fn extends P.PureComponent{renderStat(e){const t=this.context.weblabStore.isFeatureEnabled(k.b.PDPScorecard);return e instanceof Rn.a?P.createElement(_n,Mn({stat:e},this.props)):e instanceof Rn.b&&!t?P.createElement(vn,Mn({stat:e},this.props)):e instanceof Rn.c?P.createElement(Ln,Mn({stat:e},this.props)):null}render(){const{paperDetail:{paper:{scorecardStats:e}}}=this.props;if(!e||e.isEmpty())return null;const t=this.context.envInfo.isMobile,a=this.context.weblabStore.isFeatureEnabled(k.b.PDPScorecard);return P.createElement("div",{className:"scorecard"},P.createElement("div",{className:"scorecard_container"},e.map((e,n)=>{const r=this.renderStat(e);if(null===r)return null;const i=q()({scorecard__item:!t||a,scorecard__item__mobile:t&&!a,scorecard__item__new:a});return P.createElement(qt.a,{key:"".concat(e.typeKey,"-").concat(n),className:i},r)})))}}!function(e,t,a){t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a}(Fn,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});var qn=a(810),Hn=a(931),Bn=a(932);function zn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Vn extends P.PureComponent{constructor(e,t){super(e,t),zn(this,"onClickEmail",this.onClickShareLink.bind(this,Bn.a.EMAIL)),zn(this,"onClickFacebook",this.onClickShareLink.bind(this,Bn.a.FACEBOOK)),zn(this,"onClickTwitter",this.onClickShareLink.bind(this,Bn.a.TWITTER)),zn(this,"onClickWikipedia",this.onClickShareLink.bind(this,Bn.a.WIKIPEDIA)),this.state={copiedUrl:!1}}trackShareEvent(e){const t=Oe.a.create(Pe.a.SHARE,{socialType:e.id});Object(Te.a)(t)}copyToClipboard(e){const t=document.createElement("textarea");t.innerText=e,document.body&&document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),this.setState({copiedUrl:!0})}onClickShareLink(e){const{title:t,message:a,corpusId:n}=this.props;this.trackShareEvent(e);const r=encodeURIComponent("".concat(window.location.href,"?utm_source=").concat(e.id)),i=encodeURIComponent(t),s=a?"".concat(encodeURIComponent(a),": ").concat(r):r;let o="";switch(e){case Bn.a.EMAIL:o="mailto:?subject=".concat(i,"&body=").concat(s);break;case Bn.a.FACEBOOK:o=Object(Hn.a)(r);break;case Bn.a.WIKIPEDIA:n&&(o=Object(Hn.d)(n));break;case Bn.a.TWITTER:o=Object(Hn.c)(r,i)}e===Bn.a.EMAIL?window.location.href=o:e===Bn.a.WIKIPEDIA?this.copyToClipboard(o):window.open(o,"_blank","left=100,top=100,width=800,height=500,toolbar=1,resizable=0,rel=noreferrer")}render(){const{envInfo:{isMobile:e}}=this.context,{copiedUrl:t}=this.state,a=q()(this.props.className,{"paper-detail-page__share-btn-container-mobile":e,"paper-detail-page__share-btn-container":!e}),n=t?Object(u.b)(e=>e.paperDetail.shareButtonLabel.wikipediaShareHoverTextCopied):Object(u.b)(e=>e.paperDetail.shareButtonLabel.wikipediaShareHoverText);return P.createElement("div",{className:a},P.createElement("div",{className:"paper-detail-page__share-btn"},Object(u.b)(e=>e.paperDetail.shareButtonLabel.sharePaper),P.createElement(c.a,{icon:"share-twitter",className:"fill--primary paper-detail-page__share-social-icon",onClick:this.onClickTwitter}),P.createElement(c.a,{icon:"share-facebook",className:"fill--primary paper-detail-page__share-social-icon",onClick:this.onClickFacebook}),this.props.corpusId&&P.createElement(qn.default,{placement:qn.PLACEMENT.BOTTOM,tooltipContent:n},P.createElement(c.a,{icon:"fa-link-box",className:"fill--primary paper-detail-page__share-social-icon",onClick:this.onClickWikipedia})),P.createElement(c.a,{icon:"share-email",className:"fill--primary paper-detail-page__share-social-icon",onClick:this.onClickEmail})))}}zn(Vn,"contextTypes",{dispatcher:O.a.instanceOf(y.a).isRequired,envInfo:O.a.instanceOf(A.a).isRequired});var Un=a(907);class Wn extends P.PureComponent{isActive(){const{indicatorIndex:e,offSet:t,paperCount:a,currentIndex:n}=this.props;return function(e){let{currentIndex:t,indicatorIndex:a,offSet:n,paperCount:r}=e;return t<=0?a>=0&&a<n:a>=t&&a<t+n||t>=r-n&&t<=r-1&&(a>=t||a>=r-n)}({indicatorIndex:e,offSet:t,paperCount:a,currentIndex:n})}render(){return P.createElement("li",{className:this.isActive()?"carousel-indicator carousel-indicator-active":"carousel-indicator"})}}var Gn=a(914);function Kn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Yn extends P.PureComponent{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];super(e,...a),Kn(this,"selectSizeRender",()=>{const e=window.innerWidth;e<1300&&e>800?this.setState({offSet:2,isNarrowScreen:!1}):e<800?this.setState({isNarrowScreen:!0}):e>=1300&&this.setState({offSet:3,isNarrowScreen:!1})}),Kn(this,"getPreviousPaperSet",()=>{const{offSet:e,currentIndex:t}=this.state;t<0&&this.setState({currentIndex:0}),0!==t&&this.setState({currentIndex:t-e}),this.setState({animationClassName:"carousel-left"})}),Kn(this,"getNextPaperSet",()=>{const{offSet:e,currentIndex:t}=this.state,{paperDetail:{relatedPapers:a}}=this.props;t===a.size-1||t<0?this.setState({currentIndex:0}):this.setState({currentIndex:t+e}),this.setState({animationClassName:"carousel-right"})}),Kn(this,"renderIndicators",()=>{const{paperDetail:{relatedPapers:e}}=this.props,{currentIndex:t,offSet:a}=this.state,n=e.size;return P.createElement("ul",{className:"carousel-indicators"},e.map((e,r)=>P.createElement(Wn,{key:r,currentIndex:t,indicatorIndex:r,offSet:a,paperCount:n})))}),Kn(this,"onShowMoreClick",()=>{const{showMoreToggle:e}=this.state;this.setState({showMoreToggle:!e})}),this.state={paperFetchCount:10,currentIndex:0,offSet:3,screenWidth:null,animationClassName:"",isNarrowScreen:!1,smallScreenOffSet:2,showMoreToggle:!0}}componentDidMount(){Ot.a.requestAnimationFrame(()=>{this.setState({screenWidth:window.innerWidth})}),window.matchMedia("(max-width: ".concat(800,"px)")).onchange=this.selectSizeRender,window.matchMedia("(min-width: ".concat(800,"px) and (max-width: ").concat(1300,"px)")).onchange=this.selectSizeRender,window.matchMedia("(min-width: ".concat(1300,"px)")).onchange=this.selectSizeRender,this.selectSizeRender()}renderSimilarPapers(){const{offSet:e,currentIndex:t,paperFetchCount:a,animationClassName:n,isNarrowScreen:r,smallScreenOffSet:i,showMoreToggle:s}=this.state;return P.createElement(Gn.CSSTransitionGroup,{transitionName:n,transitionEnterTimeout:600,transitionLeaveTimeout:600},P.createElement(Un.a,{key:t,paperDetail:this.props.paperDetail,currentIndex:t,paperFetchCount:a,offSet:e,isNarrowScreen:r,smallScreenOffSet:i,showMoreToggle:s}))}showLeftArrow(){const{currentIndex:e}=this.state;return!(e<=0)}showRightArrow(){const{currentIndex:e,offSet:t}=this.state,{paperDetail:{relatedPapers:a}}=this.props;return!(e+t>=a.size)&&!(e===a.size-1)}render(){const{showMoreToggle:e,smallScreenOffSet:t,isNarrowScreen:a}=this.state,{paperDetail:{relatedPapers:n}}=this.props,r=n.size;return P.createElement("div",{className:"carousel-container"},!a&&this.renderIndicators(),this.showLeftArrow()&&!a?P.createElement(Jt.a,{direction:Jt.a.Direction.LEFT,onClick:this.getPreviousPaperSet,className:"carousal-arrow"}):null,P.createElement("div",{className:"content-wrapper"},this.renderSimilarPapers()),this.showRightArrow()&&!a?P.createElement(Jt.a,{direction:Jt.a.Direction.RIGHT,onClick:this.getNextPaperSet,className:"carousal-arrow"}):null,a&&P.createElement("div",{className:"narrow-view-footer-container"},P.createElement("div",{className:"show-more",onClick:this.onShowMoreClick},P.createElement(Jt.a,{direction:e?Jt.a.Direction.DOWN:Jt.a.Direction.UP,onClick:this.onShowMoreClick,className:"carousal-arrow"}),P.createElement("p",{className:"toggle-text"},e?Object(u.b)(e=>e.paperDetail.relatedPapers.narrowViewToggle.ShowMoreToggleText):Object(u.b)(e=>e.paperDetail.relatedPapers.narrowViewToggle.ShowLessToggleText))),P.createElement("div",{className:"number-indicator"},e?t:r,"/",r)))}}Kn(Yn,"contextTypes",{api:O.a.instanceOf(ct.a).isRequired});class Qn extends P.PureComponent{render(){const{paperDetail:e}=this.props;return P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:Object(u.b)(e=>e.paperDetail.sectionTitles.similarPapers)},P.createElement("div",{className:"card-container"},P.createElement("h4",{className:"card-header-title__carousel"},Object(u.b)(e=>e.paperDetail.sectionTitles.similarPapers)),P.createElement(Yn,{paperDetail:e})))}}var Jn=a(952);function Xn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function $n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Zn extends P.PureComponent{constructor(){super(...arguments),this.state=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(a),!0).forEach((function(t){$n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,()=>{this.setState(this.getStateFromWeblabStore())}),this.handleTabClick=this.handleTabClick.bind(this),this.trackMetadataClick=this.trackMetadataClick.bind(this),this.trackActionClick=this.trackActionClick.bind(this)}getStateFromWeblabStore(){const e=this.context.weblabStore.getVariation(tt.b.ABTestMock.KEY);if(this.state&&e===this.state.mockVariation)return{};let t=1;return/^test_\d+$/.test(e)&&(t=parseFloat(e.replace("test_",""))/100),{heapGroup:Math.random()<=t?e:null,mockVariation:e}}handleTabClick(e){const{slug:t,id:a}=this.props.paperDetail.paper,n={slug:t,paperId:a};this.context.history.replace(Object(at.d)({params:n,routeName:"PAPER_DETAIL",query:{tab:e}})),Object(Te.a)(Oe.a.create(Pe.a.PaperDetail.TAB,{tab:e}))}getRelatedPapersQuery(e){const{paper:{entities:t}}=e;return t.isEmpty()?null:t.first().name}trackMetadataClick(e,t){const a=this.props.paperDetail.paper.id,n=Pe.a.getIn(Pe.a.PaperDetail.Header,e);Object(Te.a)(Oe.a.create(n,{paperId:a,clickedEntityId:t}))}trackActionClick(e,t){const a=this.props.paperDetail.paper.id,n=Pe.a.getIn(Pe.a.PaperDetail.Header,"Action",e),r=st.a.recursive(t,{paperId:a});Object(Te.a)(Oe.a.create(n,r))}renderAuthorList(){const{paper:e}=this.props.paperDetail;return w.a.createElement($a,{paper:e,onClick:this.trackMetadataClick,isFreshPDP:!0,maxAuthors:3})}renderVenueAndYearListItem(){const{paper:e}=this.props.paperDetail,{year:t,venue:a}=e,n=a&&"string"==typeof a.text&&a.text.length>0,r=Object(_e.i)(t);let i;n&&r?i=w.a.createElement(dn.a,{paper:e,stripYear:!0,textLength:30}):n&&!r&&(i=w.a.createElement(dn.a,{paper:e,stripYear:!1,textLength:30}));const s=t&&"string"==typeof t.text?w.a.createElement(de.a,{field:t}):t;if(r||n)return w.a.createElement("span",{key:"year-and-venue","data-selenium-selector":"year-and-venue"},Object(u.b)(e=>e.paper.meta.published),n?" in ":null,n?w.a.createElement("span",{"data-selenium-selector":"venue-metadata"},i):null,r?" ":null,r?w.a.createElement("span",{"data-selenium-selector":"paper-year"},s):null)}renderFieldOfStudy(){const{paper:e}=this.props.paperDetail;return e.fieldsOfStudy&&e.fieldsOfStudy.size?w.a.createElement(pn.a,{paper:e,"data-heap-id":"paper-meta-fos"}):null}renderJournal(){var e,t,a;const{paper:n}=this.props.paperDetail,r=(null!=(a=n)&&null!=(a=a.journal)?a.name:a)===(null!=(t=n)&&null!=(t=t.venue)?t.text:t);return(null!=(e=n)&&null!=(e=e.journal)?e.name:e)&&!r?w.a.createElement("span",{"data-heap-id":"paper-meta-journal"},n.journal.name):null}render(){const{paperDetail:e,paperDetail:{paper:t,skipperExperiments:a}}=this.props,{envInfo:{isMobile:n}}=this.context,{heapGroup:r}=this.state;return w.a.createElement("div",{className:"fresh-paper-detail-page paper-detail-cards",role:"main",id:"main-content","data-heap-id":tt.b.ABTestMock.KEY,"data-heap-group":r},w.a.createElement("div",{className:"fresh-paper-detail-page__above-the-fold"},w.a.createElement("div",{className:"centered-max-width-content"},w.a.createElement(Ft.a,{layout:"row",layoutMed:"column",position:"relative"},w.a.createElement(qt.a,{className:"flex-item--width-66 flex-item__left-column"},w.a.createElement(M,{id:"paper-header",className:n?"fresh-paper-detail-page__header__mobile":"fresh-paper-detail-page__header","data-selenium-selector":"paper-detail-page-header",navLabel:Object(u.b)(e=>e.paperDetail.tabLabels.abstract)},w.a.createElement(De.a,{paper:t,onClick:this.trackMetadataClick,isFreshPDP:!0,maxAuthors:3,isPDPMeta:!0,className:"paper-detail__paper-meta-top"}),w.a.createElement("h1",{"data-selenium-selector":"paper-detail-title"},t.title.text),w.a.createElement("pre",{className:"bibtex-citation","data-nosnippet":!0},Object(Jn.a)(t)),w.a.createElement(un.a,{childList:[this.renderAuthorList(),this.renderVenueAndYearListItem(),this.renderFieldOfStudy(),this.renderJournal()]}),w.a.createElement(Dt,{paper:t,skipperExperiments:a}),t.paperAbstract.text?w.a.createElement(Ye.a,{experiment:tt.b.PaperHighlightAbstractV2,eligibilityTest:()=>e.skipperExperiments.memberOf("paper-abstract-highlight-v2")},w.a.createElement(ze.b,null,w.a.createElement("div",{className:"fresh-paper-detail-page__abstract","data-selenium-selector":"abstract-text"},w.a.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:"Abstract"}),w.a.createElement(Vt.a,{className:"abstract__text text--preline",text:t.paperAbstract.text,limit:n?200:500,truncateActionText:Object(u.b)(e=>e.textTruncator.allCapsAlternative.truncateLabel),extendActionText:Object(u.b)(e=>e.textTruncator.allCapsAlternative.extendLabel)}))),w.a.createElement(ze.c,{variation:tt.b.PaperHighlightAbstractV2.Variation.HIGHLIGHTED_ABSTRACT_DEFAULT_TOGGLE_ON},w.a.createElement(Xa,{paperDetail:e,isMobile:n,defaultToggleOn:!0})),w.a.createElement(ze.c,{variation:tt.b.PaperHighlightAbstractV2.Variation.HIGHLIGHTED_ABSTRACT_DEFAULT_TOGGLE_OFF},w.a.createElement(Xa,{paperDetail:e,isMobile:n,defaultToggleOn:!1}))):null,w.a.createElement(Oa,{paper:t,trackActionClick:this.trackActionClick,isPdp:!0}),w.a.createElement(ba.a,null,w.a.createElement(I,null,w.a.createElement(He.b,null,w.a.createElement(Ye.a,{experiment:tt.b.AugmentedReaderPDP,eligibilityTest:()=>e.skipperExperiments.memberOf("augmented-reader-pdp")},w.a.createElement(ze.b,null),w.a.createElement(ze.c,{variation:tt.b.AugmentedReaderPDP.Variation.AUGMENTED_READER},w.a.createElement(T,{paperAugmentedReader:e.skipperExperiments.dataFor("augmented-reader-pdp")})))))))),w.a.createElement(qt.a,{className:"flex-item--width-33 flex-item__right-column"},w.a.createElement(Vn,{title:t.title.text,corpusId:t.corpusId}),w.a.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:"Scorecard"}),w.a.createElement(Fn,{paperDetail:e}))))),w.a.createElement(on,null),w.a.createElement("div",{className:"centered-max-width-content"},w.a.createElement(ee,null,w.a.createElement(Ba,{paperDetail:e}),w.a.createElement(na,{paperDetail:e}),w.a.createElement(La,{paperDetail:e}),xt.hasContent({paperDetail:e})&&w.a.createElement(xt,{isMobile:n,paperDetail:e}),cn.hasContent({paperDetail:e})&&w.a.createElement(cn,{paperDetail:e}),w.a.createElement(He.c,{feature:k.b.SimilarPapersPdp},w.a.createElement(He.b,null,w.a.createElement(M,{id:"related-papers",navLabel:Object(u.b)(e=>e.paperDetail.tabLabels.similarPapers)},w.a.createElement(Qn,{paperDetail:e})))))))}}$n(Zn,"propTypes",{paperDetail:O.a.instanceOf(et.f).isRequired}),$n(Zn,"contextTypes",{envInfo:O.a.instanceOf(A.a).isRequired,history:O.a.instanceOf(_.a).isRequired,paperStore:O.a.instanceOf(ut.a).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired});var er=a(28),tr=a(433),ar=a(165),nr=a(150),rr=a(10),ir=a(152),sr=a(930),or=a(110);function lr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"default",(function(){return cr}));class cr extends P.Component{constructor(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];super(e,...a),lr(this,"onAuthStoreChange",()=>{setTimeout(()=>this.apiFetchPaperDetail(),5)}),lr(this,"stateFromPaperStore",()=>({loading:this.context.paperStore.isLoading(),paperDetail:this.context.paperStore.getPaperDetail()})),lr(this,"apiFetchPaperDetail",()=>{const{paperDetail:e}=this.state,t=e.paper.id;this.context.api.fetchPaperDetail({paperId:t,requireSlug:!1})}),lr(this,"deleteLibraryEntries",e=>this.context.api.deleteLibraryEntries(he.Set([e]))),lr(this,"saveToLibrary",async()=>{const e=this.context.authStore,t=this.context.api,a=this.context.dispatcher,r=this.context.messageStore,i=this.context.tagStore,{paperDetail:{paper:s}}=this.state,o=s.title.text,l=Object(tr.a)({paperId:s.id,paperTitle:o});try{await e.ensureLogin({dispatcher:a,location:b.f.pdpLibrary}),i.isUninitialized()&&await t.getLibraryTags();const{resultData:s}=await t.createLibraryEntry(l),c=Object(u.b)(e=>e.library.message.success.header),p=Object(u.b)(e=>e.library.message.success.body,o);r.addSuccess(p,c,P.createElement(n.a,{entryId:s.id,deleteLibraryEntry:this.deleteLibraryEntries}))}catch(e){if(Object(rr.a)(!1,"library",'failed to save to library[paperId="'.concat(s.id," with status ").concat(e.status,'"]'),e),e&&403===e.status){const e=Object(u.b)(e=>e.library.message.duplicate.header),t=Object(u.b)(e=>e.library.message.duplicate.body,o);r.addWarning(t,e)}else{const e=Object(u.b)(e=>e.library.message.error.header),t=Object(u.b)(e=>e.library.message.error.body);r.addError(t,e)}}}),this.state=this.stateFromPaperStore(),this.context.authStore.registerComponent(this,this.onAuthStoreChange),this.context.paperStore.registerComponent(this,()=>{this.setState(this.stateFromPaperStore())})}componentDidMount(){const e=this.context.history;Object(er.l)(e.location.search).save_to_library&&this.saveToLibrary()}render(){const{paperDetail:e,loading:t}=this.state,a=!!e.paper.externalContentStats.find(e=>e.contentType===ar.a.BLOG&&e.count>0),n=!t&&P.createElement(Ct,{target:Pe.a.PaperDetail.SCROLL_LANDMARKS,section:"Footer"},P.createElement(r.a,{showAltMetric:a}));return P.createElement(i.a,{heapProps:{"page-type":sr.b,"page-paper-id":e.paper.id}},P.createElement(o.a,{key:e.paper.id,className:this.context.envInfo.isMobile?"detail":"paper",footer:n},t?P.createElement("div",{className:"container"},P.createElement("div",{className:"loading-controls flex-row-vcenter",role:"main",id:"main-content"},P.createElement(s.a,{seleniumSelector:"paper-details-loading"})," Loading")):P.createElement(P.Fragment,null,P.createElement(Zn,{paperDetail:e}),Object(or.b)(this.props.route.routes,{paperDetail:e}))))}}lr(cr,"contextTypes",{api:O.a.instanceOf(ct.a).isRequired,authStore:O.a.instanceOf(p.a).isRequired,dispatcher:O.a.instanceOf(y.a).isRequired,envInfo:O.a.instanceOf(A.a).isRequired,history:O.a.instanceOf(_.a).isRequired,messageStore:O.a.instanceOf(nr.a).isRequired,paperStore:O.a.instanceOf(ut.a).isRequired,tagStore:O.a.instanceOf(ir.a).isRequired,weblabStore:O.a.instanceOf(rt.b).isRequired})},766:function(e,t,a){e.exports=a(916)()},786:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l}));var n=a(227),r=(a(0),a(115));const i="inboundCitations",s="outboundCitations",o="similarPapers";function l(e){const t={paperId:e.paperId,page:e.page,section:e.section,sortOrder:e.sortOrder,swapPosition:e.swapPosition,clickedPosition:e.paperList.findIndex(t=>t.id===e.clickedPaper.id),listContext:e.paperList.map(e=>({paperId:e.id,authors:e.authors.map(e=>({name:e.alias.name,ids:e.alias.ids.toJS()})).toJS()})).toJS()};Object(r.a)(n.a.PaperDetail.ORDERED_PAPER_LIST_RESULT,t)}},788:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},823:function(e,t,a){"use strict";var n=a(716),r=a(226),i=a(15),s=a(714),o=a.n(s);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}t.a=e=>{let{display:t,openNewTab:a}=e;const s={};return a&&(s.target="_blank"),i.createElement("span",{className:o()({"beta-tag":!0,["beta-tag__display__".concat(t)]:!0})},i.createElement(n.a,l({to:"FAQ",hash:"beta"},s),Object(r.b)(e=>e.betaTag.label)))}},825:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=l(a(918)),i=l(a(15)),s=l(a(766)),o=(l(a(24)),a(919));function l(e){return e&&e.__esModule?e:{default:e}}s.default.any,s.default.func,s.default.node;var c=function(e){function t(a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a,r));return i.performAppear=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(i._handleDoneAppearing.bind(i,e,t)):i._handleDoneAppearing(e,t)},i._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete i.currentlyTransitioningKeys[e];var a=(0,o.getChildMapping)(i.props.children);a&&a.hasOwnProperty(e)||i.performLeave(e,t)},i.performEnter=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(i._handleDoneEntering.bind(i,e,t)):i._handleDoneEntering(e,t)},i._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete i.currentlyTransitioningKeys[e];var a=(0,o.getChildMapping)(i.props.children);a&&a.hasOwnProperty(e)||i.performLeave(e,t)},i.performLeave=function(e,t){i.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(i._handleDoneLeaving.bind(i,e,t)):i._handleDoneLeaving(e,t)},i._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete i.currentlyTransitioningKeys[e];var a=(0,o.getChildMapping)(i.props.children);a&&a.hasOwnProperty(e)?i.keysToEnter.push(e):i.setState((function(t){var a=n({},t.children);return delete a[e],{children:a}}))},i.childRefs=Object.create(null),i.state={children:(0,o.getChildMapping)(a.children)},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,o.getChildMapping)(e.children),a=this.state.children;for(var n in this.setState({children:(0,o.mergeChildMappings)(a,t)}),t){var r=a&&a.hasOwnProperty(n);!t[n]||r||this.currentlyTransitioningKeys[n]||this.keysToEnter.push(n)}for(var i in a){var s=t&&t.hasOwnProperty(i);!a[i]||s||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var a=this.keysToLeave;this.keysToLeave=[],a.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],a=function(a){var n=e.state.children[a];if(n){var s="string"!=typeof n.ref,o=e.props.childFactory(n),l=function(t){e.childRefs[a]=t};o===n&&s&&(l=(0,r.default)(n.ref,l)),t.push(i.default.cloneElement(o,{key:a,ref:l}))}};for(var s in this.state.children)a(s);var o=n({},this.props);return delete o.transitionLeave,delete o.transitionName,delete o.transitionAppear,delete o.transitionEnter,delete o.childFactory,delete o.transitionLeaveTimeout,delete o.transitionEnterTimeout,delete o.transitionAppearTimeout,delete o.component,i.default.createElement(this.props.component,o,t)},t}(i.default.Component);c.displayName="TransitionGroup",c.propTypes={},c.defaultProps={component:"span",childFactory:function(e){return e}},t.default=c,e.exports=t.default},826:function(e,t,a){"use strict";t.__esModule=!0,t.default=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=n,e.exports=t.default},827:function(e,t,a){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",a="transition"+e;return function(e){if(e[a]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};r(a(15));var n=r(a(766));function r(e){return e&&e.__esModule?e:{default:e}}t.nameShape=n.default.oneOfType([n.default.string,n.default.shape({enter:n.default.string,leave:n.default.string,active:n.default.string}),n.default.shape({enter:n.default.string,enterActive:n.default.string,leave:n.default.string,leaveActive:n.default.string,appear:n.default.string,appearActive:n.default.string})])},857:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n,r,i,s=a(715);class o extends s.a{}i={icon:"help",width:"15",height:"15",className:"fill--gray"},(r="defaultProps")in(n=o)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i},858:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(728),r=a(832),i=a(833),s=a(848),o=(a(50),a(61)),l=a(227),c=a(69),p=a(15),u=a(714),d=a.n(u),h=(a(0),a(7));function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class b extends p.PureComponent{constructor(){super(...arguments),m(this,"onChangeSort",e=>{const t="string"==typeof e?e:e.target.value;this.props.onChangeSort&&this.props.onChangeSort(t);const a=this.context.analyticsLocation;if(a){const e=l.a.getIn(a,"SORT_BY");Object(c.a)(s.a.create(e,{sort:t}))}else Object(c.a)(s.a.create(l.a.SORT_BY,{sort:t}))})}renderOptions(){return p.createElement("select",{className:"legacy__select search-sort-select",onChange:this.onChangeSort,value:this.props.sort,"data-selenium-selector":"sort-select"},this.props.options.map(e=>p.createElement("option",{value:e.id,key:e.id},o.a.getString("sort.".concat(e.id,".label")))))}renderTabs(){const e=this.props.options.map(e=>p.createElement(r.a,{key:e.id,isActive:e.id===this.props.sort},p.createElement(n.a,{iconProps:{icon:e.icon,width:"15",height:"15"},text:o.a.getString("sort.".concat(e.id,".label")),onClick:this.onChangeSort.bind(this,e.id),style:{border:"none"},seleniumSelector:"sort-by-".concat(e.id)})));return p.createElement(i.a,null,e.toArray())}render(){const{className:e,displayType:t,labelText:a}=this.props,n=d()(e,"search-sort flex-row-vcenter author-publications-list-sorts");return p.createElement("div",{className:n},p.createElement("label",{className:"search-sort-label"},a),"tabs"===t?this.renderTabs():this.renderOptions())}}m(b,"contextTypes",{analyticsLocation:a.n(h).a.object}),m(b,"defaultProps",{displayType:"select",labelText:"Sort by:"})},899:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=/https?:\/\/[\S]+[\w+$]/},907:function(e,t,a){"use strict";a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return C}));var n=a(739),r=a(725),i=a(724),s=a(740),o=a(716),l=a(741),c=a(754),p=a(25),u=a(149),d=a(226),h=a(718),m=a(227),b=a(8),f=a(170),g=a(786),E=a(69),y=a(236),_=a(15),v=a(7),O=a.n(v);a(0);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends _.PureComponent{constructor(){super(...arguments),this.trackClickSimilarPapersLink=this.trackClickSimilarPapersLink.bind(this),this.trackActionClick=this.trackActionClick.bind(this),this.state=w({papersHaveBeenRequested:!this.props.paperDetail.relatedPapers.isEmpty()},this.getStateFromStores()),this.context.paperNavStore.registerComponent(this,()=>{this.setState(w({},this.state,{},this.getStateFromStores()))})}componentDidUpdate(){const{isVisibleOrActive:e}=this.state;e&&this.loadRelatedPapers()}getStateFromStores(){const e=this.context.paperNavStore,t=e.navItems.get("related-papers");return{isVisibleOrActive:t&&(e.isItemVisible(t)||e.isItemActive(t))}}loadRelatedPapers(){const{paperDetail:{paper:e},paperFetchCount:t}=this.props,a=this.context.api;e.id&&!this.state.papersHaveBeenRequested&&(setTimeout(()=>{a.fetchRelatedPapers(e.id,{limit:t})},0),this.setState({papersHaveBeenRequested:!0}))}trackClickSimilarPapersLink(e){Object(g.d)({paperId:this.props.paperDetail.paper.id,section:g.c,paperList:this.props.paperDetail.relatedPapers,swapPosition:null,clickedPaper:e});const t={paperId:this.props.paperDetail.paper.id,clickedPaperId:e.id};this.props.paperDetail.relatedPapers.forEach((function(e,a){t["paper".concat(a)]=e.id})),Object(y.a)([new h.a(m.a.PaperDetail.SIMILAR_PAPERS_LIST,t)])}trackActionClick(e,t){const a=this.context.analyticsLocation,n=h.a;if(a){const r=m.a.getIn(a,"similar-paper-links",e),i=w({},t);Object(E.a)(n.create(r,i))}else b.a.warn("Unable to track ClickEvent from component <SimilarPapersCardBase /> because it doesn't have an analytics location")}renderMetaDataBottomFooter(e){return _.createElement("div",{className:"similar-papers__footer"},_.createElement("span",{className:"similar-papers__footer-left"},e.citationStats&&e.citationStats.numCitations.value>0&&_.createElement("span",{className:"similar-papers__footer-text"},_.createElement("span",{className:"similar-papers__footer-counts"},Object(p.e)(e.citationStats.numCitations.value)),Object(p.l)(e.citationStats.numCitations.value,Object(d.b)(e=>e.paperDetail.relatedPapers.citation.singular),Object(d.b)(e=>e.paperDetail.relatedPapers.citation.plural),!0)),e.citationStats&&e.citationStats.numKeyCitations>0&&_.createElement("span",{className:"similar-papers__footer-text"},_.createElement("span",{className:"similar-papers__footer-counts"},Object(p.e)(e.citationStats.numKeyCitations)),Object(p.l)(e.citationStats.numKeyCitations,Object(d.b)(e=>e.paperDetail.relatedPapers.highlyInfluenced.singular),Object(d.b)(e=>e.paperDetail.relatedPapers.highlyInfluenced.plural),!0))),_.createElement("div",{className:"similar-papers__footer-right"},_.createElement(s.b,{buttonText:Object(d.b)(e=>e.paper.action.saveShort),className:"similar-papers__metadata-save",paper:e,saveButtonIcon:"fa-bookmark-not-filled",trackLibraryClick:this.trackActionClick})))}renderLoading(){return _.createElement(i.a,{className:"similar-papers__body"},_.createElement(r.a,{className:"similar-papers__card"},_.createElement("div",{className:"similar-papers-card__fold"}),_.createElement("div",{className:"similar-papers__shimmer"})),_.createElement(r.a,{className:"similar-papers__card"},_.createElement("div",{className:"similar-papers-card__fold"}),_.createElement("div",{className:"similar-papers__shimmer"})),_.createElement(r.a,{className:"similar-papers__card"},_.createElement("div",{className:"similar-papers-card__fold"}),_.createElement("div",{className:"similar-papers__shimmer"})))}getCurrentPaperSet(e){const{offSet:t,currentIndex:a,smallScreenOffSet:n,showMoreToggle:r,isNarrowScreen:i}=this.props,s=e.size,o=a+t;let l;return l=a<=s-1&&a>s-t?e.slice(s-t,s):a<=0?e.slice(0,t):e.slice(a,o),r&&i?l=e.slice(0,n):i&&!r&&(l=e),l}renderRelatedPapers(e){const t=this.getCurrentPaperSet(e);return _.createElement(i.a,{seleniumSelector:"related-papers-list",className:"similar-papers__body"},e.isEmpty()?_.createElement("div",{className:"empty"},Object(d.b)(e=>e.paperDetail.relatedPapers.noPapers)):t.map(e=>_.createElement(r.a,{className:"similar-papers__card",key:e.id},_.createElement("div",{className:"similar-papers-card__fold"}),_.createElement("div",{className:"similar-papers__metadata-top"},_.createElement("ul",{className:"similar-papers__metadata-top__list"},_.createElement("li",null,_.createElement(l.a,{paper:e})),_.createElement("li",null,C({year:e.year.text,venue:e.venue.text}),_.createElement(c.a,{className:"similar-papers__metadata-top",tooltipClassName:"similar-papers__tooltip-venue",paper:e,stripYear:!0,textLength:35})))),_.createElement("div",{className:"similar_papers__link"},_.createElement(o.a,{to:"PAPER_DETAIL",params:{slug:e.slug,paperId:e.id},"data-selenium-selector":"title-link",onClick:()=>this.trackClickSimilarPapersLink(e)},e.title.text)),_.createElement("div",{className:"similar-papers__metadata"},_.createElement(n.a,{authors:e.authors})),e.paperAbstractTruncated&&_.createElement("div",{className:"similar-papers__abstract"},e.paperAbstractTruncated),this.renderMetaDataBottomFooter(e))))}render(){const{paperDetail:{isLoadingRelatedPapers:e,relatedPapers:t}}=this.props;return e?this.renderLoading():this.renderRelatedPapers(t)}}function C(e){let{venue:t,year:a}=e;return t&&a?Object(d.b)(e=>e.paperDetail.relatedPapers.publisher.bothYearAndVenue,a):a?Object(d.b)(e=>e.paperDetail.relatedPapers.publisher.onlyYear,a):t?Object(d.b)(e=>e.paperDetail.relatedPapers.publisher.onlyVenue):null}S(T,"contextTypes",{api:O.a.instanceOf(u.a).isRequired,paperNavStore:O.a.instanceOf(f.a).isRequired}),S(T,"defaultProps",{currentIndex:0,paperFetchCount:10,offSet:3,isMobile:!1,mobileOffSet:2,showMoreTruncated:!0})},912:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(45),r=a(44),i=a(16),s=a.n(i);class o extends r.a{constructor(e,t){super(n.a.SCROLL,s.a.recursive({target:e},t))}}o.create=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return new o(...t)}},914:function(e,t,a){"use strict";var n=i(a(915)),r=i(a(825));function i(e){return e&&e.__esModule?e:{default:e}}e.exports={TransitionGroup:r.default,CSSTransitionGroup:n.default}},915:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=c(a(15)),i=c(a(766)),s=c(a(825)),o=c(a(920)),l=a(827);function c(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}l.nameShape.isRequired,i.default.bool,i.default.bool,i.default.bool,(0,l.transitionTimeout)("Appear"),(0,l.transitionTimeout)("Enter"),(0,l.transitionTimeout)("Leave");var d=function(e){function t(){var a,n;p(this,t);for(var i=arguments.length,s=Array(i),l=0;l<i;l++)s[l]=arguments[l];return a=n=u(this,e.call.apply(e,[this].concat(s))),n._wrapChild=function(e){return r.default.createElement(o.default,{name:n.props.transitionName,appear:n.props.transitionAppear,enter:n.props.transitionEnter,leave:n.props.transitionLeave,appearTimeout:n.props.transitionAppearTimeout,enterTimeout:n.props.transitionEnterTimeout,leaveTimeout:n.props.transitionLeaveTimeout},e)},u(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return r.default.createElement(s.default,n({},this.props,{childFactory:this._wrapChild}))},t}(r.default.Component);d.displayName="CSSTransitionGroup",d.propTypes={},d.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=d,e.exports=t.default},916:function(e,t,a){"use strict";var n=a(917);function r(){}e.exports=function(){function e(e,t,a,r,i,s){if(s!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return a.checkPropTypes=r,a.PropTypes=a,a}},917:function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},918:function(e,t){e.exports=function(){for(var e=arguments.length,t=[],a=0;a<e;a++)t[a]=arguments[a];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},919:function(e,t,a){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return n.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function a(a){return t.hasOwnProperty(a)?t[a]:e[a]}e=e||{},t=t||{};var n={},r=[];for(var i in e)t.hasOwnProperty(i)?r.length&&(n[i]=r,r=[]):r.push(i);var s=void 0,o={};for(var l in t){if(n.hasOwnProperty(l))for(s=0;s<n[l].length;s++){var c=n[l][s];o[n[l][s]]=a(c)}o[l]=a(l)}for(s=0;s<r.length;s++)o[r[s]]=a(r[s]);return o};var n=a(15)},920:function(e,t,a){"use strict";t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=d(a(921)),i=d(a(923)),s=d(a(924)),o=a(925),l=d(a(15)),c=d(a(766)),p=a(228),u=a(827);function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=[];o.transitionEnd&&b.push(o.transitionEnd),o.animationEnd&&b.push(o.animationEnd);c.default.node,u.nameShape.isRequired,c.default.bool,c.default.bool,c.default.bool,c.default.number,c.default.number,c.default.number;var f=function(e){function t(){var a,n;h(this,t);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return a=n=m(this,e.call.apply(e,[this].concat(i))),n.componentWillAppear=function(e){n.props.appear?n.transition("appear",e,n.props.appearTimeout):e()},n.componentWillEnter=function(e){n.props.enter?n.transition("enter",e,n.props.enterTimeout):e()},n.componentWillLeave=function(e){n.props.leave?n.transition("leave",e,n.props.leaveTimeout):e()},m(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach((function(e){clearTimeout(e)})),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,a){var n=(0,p.findDOMNode)(this);if(n){var s=this.props.name[e]||this.props.name+"-"+e,l=this.props.name[e+"Active"]||s+"-active",c=null,u=void 0;(0,r.default)(n,s),this.queueClassAndNode(l,n);var d=function(e){e&&e.target!==n||(clearTimeout(c),u&&u(),(0,i.default)(n,s),(0,i.default)(n,l),u&&u(),t&&t())};a?(c=setTimeout(d,a),this.transitionTimeouts.push(c)):o.transitionEnd&&(u=function(e,t){return b.length?b.forEach((function(a){return e.addEventListener(a,t,!1)})):setTimeout(t,0),function(){b.length&&b.forEach((function(a){return e.removeEventListener(a,t,!1)}))}}(n,d))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var a=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,s.default)((function(){return a.flushClassNameAndNodeQueue()})))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach((function(e){e.node.scrollTop,(0,r.default)(e.node,e.className)})),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=n({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,l.default.cloneElement(l.default.Children.only(this.props.children),e)},t}(l.default.Component);f.displayName="CSSTransitionGroupChild",f.propTypes={},t.default=f,e.exports=t.default},921:function(e,t,a){"use strict";var n=a(788);t.__esModule=!0,t.default=function(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r=n(a(922));e.exports=t.default},922:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},923:function(e,t,a){"use strict";function n(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=n(e.className,t):e.setAttribute("class",n(e.className&&e.className.baseVal||"",t))}},924:function(e,t,a){"use strict";var n=a(788);t.__esModule=!0,t.default=void 0;var r,i=n(a(826)),s="clearTimeout",o=function(e){var t=(new Date).getTime(),a=Math.max(0,16-(t-c)),n=setTimeout(e,a);return c=t,n},l=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};i.default&&["","webkit","moz","o","ms"].some((function(e){var t=l(e,"request");if(t in window)return s=l(e,"cancel"),o=function(e){return window[t](e)}}));var c=(new Date).getTime();(r=function(e){return o(e)}).cancel=function(e){window[s]&&"function"==typeof window[s]&&window[s](e)};var p=r;t.default=p,e.exports=t.default},925:function(e,t,a){"use strict";var n=a(788);t.__esModule=!0,t.default=t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,i,s,o,l,c,p,u,d,h,m,b=n(a(826)),f="transform";if(t.transform=f,t.animationEnd=s,t.transitionEnd=i,t.transitionDelay=p,t.transitionTiming=c,t.transitionDuration=l,t.transitionProperty=o,t.animationDelay=m,t.animationTiming=h,t.animationDuration=d,t.animationName=u,b.default){var g=function(){for(var e,t,a=document.createElement("div").style,n={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},r=Object.keys(n),i="",s=0;s<r.length;s++){var o=r[s];if(o+"TransitionProperty"in a){i="-"+o.toLowerCase(),e=n[o]("TransitionEnd"),t=n[o]("AnimationEnd");break}}!e&&"transitionProperty"in a&&(e="transitionend");!t&&"animationName"in a&&(t="animationend");return a=null,{animationEnd:t,transitionEnd:e,prefix:i}}();r=g.prefix,t.transitionEnd=i=g.transitionEnd,t.animationEnd=s=g.animationEnd,t.transform=f=r+"-"+f,t.transitionProperty=o=r+"-transition-property",t.transitionDuration=l=r+"-transition-duration",t.transitionDelay=p=r+"-transition-delay",t.transitionTiming=c=r+"-transition-timing-function",t.animationName=u=r+"-animation-name",t.animationDuration=d=r+"-animation-duration",t.animationTiming=h=r+"-animation-delay",t.animationDelay=m=r+"-animation-timing-function"}var E={transform:f,end:i,property:o,timing:c,delay:p,duration:l};t.default=E},926:function(e,t,a){"use strict";const n={ADAPTIVE_FEED_BETA:"adaptive_feed_beta",AUGMENTED_READER_BETA:"augmented_reader_beta"};Object.freeze(n),t.a=n},931:function(e,t,a){"use strict";function n(e){return"https://www.facebook.com/sharer/sharer.php?u=".concat(e)}function r(e,t){return"https://twitter.com/intent/tweet?url=".concat(e,"&text=").concat(t)}function i(e){return"https://api.semanticscholar.org/CorpusID:".concat(e)}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i}))},932:function(e,t,a){"use strict";var n=a(17),r=a(0),i=a.n(r);const s={TWITTER:new n.a({id:"twitter",name:"Twitter"}),FACEBOOK:new n.a({id:"facebook",name:"Facebook"}),EMAIL:new n.a({id:"email",name:"Email"}),WIKIPEDIA:new n.a({id:"wikipedia",name:"Wikipedia"}),shareOptions(){return i.a.List.of(this.EMAIL,this.TWITTER,this.FACEBOOK,this.WIKIPEDIA)}};Object.freeze(s),t.a=s}}]);
//# sourceMappingURL=bundle-75.js.map